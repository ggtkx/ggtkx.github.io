<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>2024 é‡‘è°·æ‹¾æœˆæ¸¸å›­ä¼šç”µå­åœ°å›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <!-- å…¨å±€çŠ¶æ€ é€šç”¨å‡½æ•° -->
    <script>
      const mapURL = `/images/2024-map/map.png?cache=${Date().toString()}`;
      const siteStates = {
        selectedLanguage: 'zh',
        isDrawerOpen: false,
        selectedTab: 'guide',
        qrCodeEle: undefined,
        hasPopupOpen: false,
        // phone: '',
        // collectedStamps: [1, 5, 7],
      };

      // Cookies.set('phone', '');
      // Cookies.set('collectedStamps', []);
      function showBoothListPopupFunc(sectionName) {
        if (sectionName === sectionNames.cuisine) {
          boothListEle.innerHTML = cuisinesListHTML;
          sectionNameEle.innerHTML = 'ç¾é£ŸåŒº';
        } else if (sectionName === sectionNames.kids) {
          boothListEle.innerHTML = kidsListHTML;
          sectionNameEle.innerHTML = 'å„¿ç«¥æ¸¸æˆåŒº';
        } else if (sectionName === sectionNames.traditions) {
          boothListEle.innerHTML = traditionsListHTML;
          sectionNameEle.innerHTML = 'ä¼ ç»ŸåŒº';
        } else if (sectionName === sectionNames.functions) {
          boothListEle.innerHTML = functionsListHTML;
          sectionNameEle.innerHTML = 'åŠŸèƒ½ & èµåŠ©åŒº';
        }
        openPopup(boothListPopupEle);
        boothListEle.scrollTop = 0;
        document
          .querySelectorAll('.booth-card')
          .forEach((e) => e.addEventListener('click', openBoothDetails));
      }

      function closePopup(popupEle) {
        if (!popupEle) {
          return;
        }
        popupEle.classList.add('display-none');
        popupEle.classList.remove('display-block');
        siteStates.hasPopupOpen = false;
      }
      function openPopup(popupEle) {
        if (!popupEle) {
          return;
        }
        popupEle.classList.add('display-block');
        popupEle.classList.remove('display-none');
        siteStates.hasPopupOpen = true;
      }
    </script>

    <script type="text/javascript" src="https://blog.zgzg.io/custom/js/qrcode.js"></script>

    <!-- èµåŠ©å•†ä¿¡æ¯åŠç”Ÿæˆå¯¹åº”html -->
    <script>
      const sponsorsAndCollaboratorsMap = {
        HeCares: {
          name: 'HeCares',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-HeCares/å‹æƒ…åˆä½œ-HeCares-logo.jpeg',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-HeCares/HeCares-äºŒç»´ç .png'],
        },
        sjusv: {
          name: 'äº¤å¤§æ ¡å‹ä¼š',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-äº¤å¤§æ ¡å‹ä¼š/å‹æƒ…åˆä½œ-äº¤å¤§æ ¡å‹ä¼š-logo.png',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-äº¤å¤§æ ¡å‹ä¼š/å‹æƒ…åˆä½œ-äº¤å¤§æ ¡å‹ä¼š-äºŒç»´ç .png'],
        },
        chihuo: {
          name: 'åƒè´§å°åˆ†é˜Ÿ',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-åƒè´§å°åˆ†é˜Ÿ/å‹æƒ…åˆä½œ-åƒè´§å°åˆ†é˜Ÿlogo.jpeg',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-åƒè´§å°åˆ†é˜Ÿ/å‹æƒ…åˆä½œ-åƒè´§-äºŒç»´ç .jpg'],
        },
        taiyangshen: {
          // ç¼ºlogo
          name: 'å¤ªé˜³ç¥ç¾é™¢',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-å¤ªé˜³ç¥ç¾é™¢/Logo.PNG',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-å¤ªé˜³ç¥ç¾é™¢/QRcode.png'],
        },
        xigu: {
          name: 'æˆè°·å‰§å›¢',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-æˆè°·å‰§å›¢/å‹æƒ…åˆä½œ-æˆè°·å‰§å›¢-logo.jpeg',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-æˆè°·å‰§å›¢/å‹æƒ…åˆä½œ-æˆè°·å‰§å›¢-äºŒç»´ç .png'],
        },
        tuokouxiu: {
          name: 'ç¡…è°·è„±å£ç§€',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-ç¡…è°·è„±å£ç§€/ç¡…è°·è„±å£ç§€Logoæ–°.png',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œ-ç¡…è°·è„±å£ç§€/ç¡…è°·è„±å£ç§€äºŒç»´ç .png'],
        },
        aaya: {
          name: 'AAYA',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œæ–¹-AAYA/AAYA-logo-ä¸­æ–‡.png',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œæ–¹-AAYA/äºŒç»´ç .jpg'],
        },
        berryfun: {
          name: 'BerryFun',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œæ–¹-BerryFun/BerryFun-Logoå¸¦å­—-é€æ˜åº•.png',
          qrCode: ['/images/2024-map/sponsors/å‹æƒ…åˆä½œæ–¹-BerryFun/BerryFunå°çº¢ä¹¦äºŒç»´ç .PNG'],
        },
        '99ranch': {
          name: '99å¤§å',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-99å¤§å/ç™½é‡‘-å¤§åLogo.png',
          qrCode: ['/images/2024-map/sponsors/ç™½é‡‘-99å¤§å/ç™½é‡‘-å¤§å-äºŒç»´ç .png'],
          details: `ä¸‹è½½å¤§åAPPï¼Œè´­é½ç”Ÿæ´»æ‰€éœ€ï¼ç”Ÿé²œæœè”¬ã€ç”ŸçŒ›æ´»æµ·
é²œã€é›¶é£Ÿé¥®æ–™ã€ç¾å¦†æŠ¤è‚¤ï¼Œåº”æœ‰å°½æœ‰ï¼æœ€å¿«å½“å¤©é€è¾¾ï¼Œ
è½½æ­Œåœ¨è°·ä¸“äº«ï¼šå…¨åœºè®¢å•æ»¡$68å‡$10ï¼Œä¼˜æƒ ç :
ZGZG10ã€‚10æœˆä¸‡åœ£èŠ‚å¤§ä¿ƒï¼š
10.18 - 10.31
10% OFF $60+
15% OFF $80+
20% OFF $100+ï¼Œæ— éœ€æŠ˜æ‰£ç ï¼Œè‡ªåŠ¨æ»¡æŠ˜ã€‚æ–°äººæ³¨å†Œå†é€
å‡$20ä¼˜æƒ åˆ¸ï¼Œæ´»åŠ¨å½“å¤©å»å¤§åæ‘Šä½å¯å…è´¹é¢†å–é›¶é£Ÿç¤¼åŒ…ï¼
`,
        },
        'balance-better': {
          name: 'Balance & Better',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-Balance-Better/logo-Balance-Better.png',
          qrCode: [
            '/images/2024-map/sponsors/ç™½é‡‘-Balance-Better/balanced-better-äºŒç»´ç åŠæ–‡å­—.png',
          ],
          details: `Are you a HENRY (High Earning Not Rich Yet)?
Are you bothered by high tax burden and wondering about tax-free plans?
Are you wondering about ways of passive income?
Are you wondering how to plan for a â€œworry-freeâ€ retirement?
Balanced & Better Financial Service Team is here to help. 

We are a team of financial professionals backed by 100+ accredited financial institutions. We provide holistic financial strategy education for families, facilitate solutions from kids college tuition funding, LTC (Long Term Care) preparation to retirement planning, estate planning etc.
We strive for professional excellence and Long-Term customer satisfaction.


WeChat ID:  BalancedBetter
Meet us: bit.ly/meet-BB
`,
        },
        juso: {
          name: 'JUSO Home',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-JUSO/Juso_Home_logo-01.png',
          qrCode: [
            '/images/2024-map/sponsors/ç™½é‡‘-JUSO/ç™½é‡‘-JUSO-Home-äºŒç»´ç 1.png',
            '/images/2024-map/sponsors/ç™½é‡‘-JUSO/ç™½é‡‘-JUSO-Home-äºŒç»´ç 2',
          ],
          details: `Juso Homeæ˜¯ä¸€å®¶æ€»éƒ¨åè½äºæ—§é‡‘å±±æ¹¾åŒºçš„å®¶å±…ç”¨å“çš„å“ç‰Œã€‚ä¸“æ³¨äºæ‰“é€ ç°ä»£ã€æ—¶å°šä¸”ä¼˜è´¨çš„å®¶å±…ä½“éªŒã€‚æˆ‘ä»¬ç§‰æ‰¿è®©é«˜ç«¯æç®€è®¾è®¡è§¦æ‰‹å¯åŠçš„ç†å¿µï¼Œè‡´åŠ›äºæä¾›äº²æ°‘ä¸”å¯è´Ÿæ‹…çš„é«˜å“è´¨äº§å“ã€‚æ¬¢è¿æ‚¨ä¸æˆ‘ä»¬ä¸€èµ·ï¼Œæ„Ÿå—ç²¾è‡´å®¶å±…å¸¦æ¥çš„æ¸©é¦¨ä¸å“å‘³ã€‚`,
        },
        lingoace: {
          name: 'Lingoace',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-Lingoace/ç™½é‡‘-Lingoace-logo.jpeg',
          qrCode: ['/images/2024-map/sponsors/ç™½é‡‘-Lingoace/ç™½é‡‘-lingoace-äºŒç»´ç .png'],
          details: `LingoAce æ˜¯ä¸€å®¶ä¸“æ³¨äºä¸ºå…¨çƒå­¦ç”Ÿæä¾›ä¸­æ–‡å­¦ä¹ çš„åœ¨çº¿æ•™è‚²å¹³å°ï¼Œç‰¹åˆ«é€‚åˆ3åˆ°15å²çš„å„¿ç«¥ã€‚é€šè¿‡ç»“åˆäº’åŠ¨æ€§å¼ºçš„è¯¾ç¨‹è®¾è®¡ã€ä¸°å¯Œå¤šæ ·çš„æ•™æå’Œèµ„æ·±æ•™å¸ˆå›¢é˜Ÿï¼ŒLingoAce ä¸ºå„¿ç«¥åˆ›é€ äº†ä¸€ç§æ²‰æµ¸å¼çš„è¯­è¨€å­¦ä¹ ç¯å¢ƒã€‚å¹³å°æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒï¼Œå¸®åŠ©å­©å­ä»¬é€šè¿‡è¶£å‘³æ€§å¼ºçš„æ–¹å¼æŒæ¡ä¸­æ–‡å¬ã€è¯´ã€è¯»ã€å†™çš„æŠ€èƒ½ã€‚

LingoAce çš„æ•™å­¦æ–¹å¼ä»¥å¯“æ•™äºä¹ä¸ºæ ¸å¿ƒç†å¿µï¼Œç»“åˆæ¸¸æˆåŒ–çš„äº’åŠ¨å’Œå¤šåª’ä½“èµ„æºï¼Œæ¿€å‘å­©å­ä»¬çš„å­¦ä¹ å…´è¶£ã€‚å¹³å°ä¸Šçš„æ•™å¸ˆå‡ä¸ºç»è¿‡ä¸¥æ ¼ç­›é€‰å’Œä¸“ä¸šåŸ¹è®­çš„æ¯è¯­æ•™å¸ˆï¼Œç¡®ä¿å­¦ç”Ÿå¾—åˆ°é«˜è´¨é‡çš„æ•™å­¦æŒ‡å¯¼ã€‚æ­¤å¤–ï¼ŒLingoAce è¿˜æä¾›è¯¦ç»†çš„å­¦ä¹ æŠ¥å‘Šï¼Œå¸®åŠ©å®¶é•¿åŠæ—¶äº†è§£å­©å­çš„è¿›æ­¥æƒ…å†µã€‚

å¹³å°çš„è¯¾ç¨‹è®¾ç½®çµæ´»ï¼Œå®¶é•¿å¯ä»¥æ ¹æ®å­©å­çš„éœ€æ±‚å’Œæ°´å¹³è‡ªç”±é€‰æ‹©è¯¾ç¨‹ï¼Œæ»¡è¶³ä¸åŒè¯­è¨€å­¦ä¹ ç›®æ ‡çš„éœ€æ±‚ã€‚æ— è®ºæ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ä¸€å®šåŸºç¡€çš„å­¦ç”Ÿï¼ŒLingoAce éƒ½è‡´åŠ›äºä¸ºå…¨çƒå„¿ç«¥æä¾›é«˜æ•ˆã€æœ‰è¶£çš„ä¸­æ–‡å­¦ä¹ ä½“éªŒã€‚
`,
        },
        tradeup: {
          name: 'TradeUP è€è™è¯åˆ¸',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-TradeUP/ç™½é‡‘-è€è™è¯åˆ¸logo.jpeg',
          qrCode: ['/images/2024-map/sponsors/ç™½é‡‘-TradeUP/è€è™è¯åˆ¸äºŒç»´ç .jpeg'],
          details: `TradeUP Securities, Inc.æ˜¯è€è™è¯åˆ¸ï¼ˆNasdaq: TIGR)åœ¨ç¾å›½æŒ‚ç‰Œè¥ä¸šã€æœ‰æ¸…ç®—èµ„è´¨çš„è¯åˆ¸å…¬å¸ï¼Œä¸“æ³¨äºä¸ºå…¨çƒå®¢æˆ·æä¾›è¿…æ·ã€é«˜è´¨é‡çš„è¯åˆ¸äº¤æ˜“æ‰§è¡Œã€è¯åˆ¸æ¸…ç®—å’Œå…¨æ–¹ä½é‡‘èæŠ•èµ„æœåŠ¡ã€‚

TradeUPæˆç«‹äº1986å¹´ï¼Œæ‹¥æœ‰é€¾30å¹´çš„ç»éªŒï¼Œç§‰æ‰¿å¯é ã€ä¸“ä¸šçš„å…¨çƒåŒ–æœåŠ¡æ ‡å‡†ï¼Œå·²æˆä¸ºè¯¸å¤šå›½é™…é›¶å”®åŠæœºæ„å®¢æˆ·å€¼å¾—ä¿¡èµ–çš„æŠ•èµ„ä¼™ä¼´ã€‚æˆ‘ä»¬å—ç¾å›½SECç›‘ç®¡ï¼Œä¹Ÿæ˜¯FINRAã€NYSEã€SIPCçš„ä¼šå‘˜ã€‚

TradeUp is a Nasdaq-listed fintech company that can support your investments with a professional trading system, educational content, and analysis.
`,
        },
        fangtai: {
          name: 'æ–¹å¤ª',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-æ–¹å¤ª/ç™½é‡‘-FOTILEæ–¹å¤ª-logo-black.png',
          qrCode: [
            '/images/2024-map/sponsors/ç™½é‡‘-æ–¹å¤ª/ç™½é‡‘-æ–¹å¤ª-CupertinoäºŒç»´ç .jpg',
            '/images/2024-map/sponsors/ç™½é‡‘-æ–¹å¤ª/ç™½é‡‘-æ–¹å¤ª-MilpitasäºŒç»´ç .jpg',
            '/images/2024-map/sponsors/ç™½é‡‘-æ–¹å¤ª/ç™½é‡‘-æ–¹å¤ª-UnionCityäºŒç»´ç .jpg',
          ],
          details: `æ–¹å¤ªè¿‘30å¹´æ¥å§‹ç»ˆè‡´åŠ›äºé€šè¿‡æŠ€æœ¯åˆ›æ–°ï¼Œä¸ºç”¨æˆ·æ‰“é€ æ›´å¥åº·å¹¸ç¦çš„å¨æˆ¿ç”Ÿæ´»ã€‚2017å¹´ï¼Œæ–¹å¤ªè¿›å†›ç¾å›½å¸‚åœºï¼Œä¸“ä¸ºç¾å›½æ›´å¼€æ”¾å®½æ•çš„å¨æˆ¿è®¾è®¡äº†ä¸€ç³»åˆ—é«˜ç«¯å¨ç”µäº§å“ï¼Œèµ¢å¾—äº†å¹¿å¤§ç”¨æˆ·çš„ä¿¡èµ–ä¸å¥½è¯„ã€‚ç›®å‰ï¼Œç¾å›½æ ¸å¿ƒåŸå¸‚ä¸­æ¯ä¸‰æˆ·åäººå®¶åº­ï¼Œå°±æœ‰ä¸€æˆ·é€‰æ‹©æ–¹å¤ªã€‚å‡­å€Ÿå¼ºå¤§çš„å®åŠ›å’Œå“è¶Šçš„å“è´¨ï¼Œæ–¹å¤ªè¿ç»­ä¸‰å¹´è¢«ç¦å¸ƒæ–¯è¯„é€‰ä¸ºâ€œåä½³æ²¹çƒŸæœºå“ç‰Œâ€ï¼Œæˆä¸ºå”¯ä¸€ä¸Šæ¦œçš„ä¸­å›½å‡ºæµ·å“ç‰Œã€‚`,
        },
        fantuan: {
          name: 'é¥­å›¢',
          tier: 'platinum',
          logo: '/images/2024-map/sponsors/ç™½é‡‘-é¥­å›¢/ç™½é‡‘-é¥­å›¢-logo.png',
          qrCode: ['/images/2024-map/sponsors/ç™½é‡‘-é¥­å›¢/ç™½é‡‘-é¥­å›¢-äºŒç»´ç .png'],
          details: `é¥­å›¢å¤–å–ç»“åˆäº†æ¹¾åŒºå¥½åƒçš„å¥½ç©çš„ï¼Œä»ã€å¤–å–é…é€ã€‘åˆ°ã€ç”Ÿé²œä¾¿åˆ©ã€‘åˆ°ã€åˆ°åº—å›¢è´­ã€‘ç­‰å¤šæ ·åŒ–æœåŠ¡, ä¸æ–­å¼€æ‹“ä¸šåŠ¡è¾¹ç•Œ, å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°æ¢ç´¢æ¹¾åŒºæœ¬åœ°ç”Ÿæ´»ã€‚ä¸ºæµ·å¤–åäººåŠæ‰€æœ‰æµ·å¤–æ¶ˆè´¹è€…æä¾›æ›´åŠ ä¾¿æ·, é«˜æ•ˆ, æ™ºèƒ½çš„æœåŠ¡ã€‚
ç°åœ¨æ–°äººç”¨æˆ·è¿˜æœ‰$100å¤§ç¤¼åŒ…ä¼˜æƒ åˆ¸ã€‚å…¨åœºç‹¬å®¶è¶…å€¼æŠ˜æ‰£ç¾é£Ÿã€å¨±ä¹ï¼Œè®©å¤§å®¶æ„Ÿå—åˆ°å®¶çš„å‘³é“å®¶çš„æ¸©æš–ï¼ŒçœŸæ­£åšåˆ°â€œè½»æ¾ç”Ÿæ´», ä¸€ä¸ªé¥­å›¢å°±å¤Ÿäº†â€
`,
        },
        ipg: {
          name: 'IPG',
          tier: 'gold',
          logo: '/images/2024-map/sponsors/é»„é‡‘-IPG/logo.jpg',
          qrCode: ['/images/2024-map/sponsors/é»„é‡‘-IPG/å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç .png'],
          details: `è‹±ç‰¹åˆ©æ™®é›†å›¢æˆç«‹äºç¡…è°·ï¼Œä¸“æ³¨å…¨çƒæ‹›é›‡ä¸€ä½“åŒ–ï¼Œé›†å›¢æ€»éƒ¨ä½äºç¡…è°·ï¼Œåœ¨çº½çº¦ã€ä¼¦æ•¦ã€æ–°åŠ å¡ã€ä¸Šæµ·ã€åŒ—äº¬ã€æ·±åœ³ç­‰å…¨çƒ15ä¸ªæ ¸å¿ƒåŸå¸‚è®¾æœ‰åˆ†å…¬å¸ã€‚AIäººæ‰åº“11äº¿ï¼Œè¦†ç›–160+å›½å®¶ï¼Œä¸ºé¡¶çº§ç§‘æŠ€å…¬å¸æä¾›æ‹›è˜ä¸é›‡ä½£æœåŠ¡ï¼Œè‡´åŠ›äºAIé©±åŠ¨çš„äººæ‰åŒ¹é…ã€‚`,
        },
        steve: {
          name: 'Steve Chen',
          tier: 'gold',
          logo: '/images/2024-map/sponsors/é»„é‡‘-Steve/é‡‘ç‰Œ-Steve-Chen-logo.jpeg',
          qrCode: ['/images/2024-map/sponsors/é»„é‡‘-Steve/é‡‘ç‰Œ-Steve-Chen-äºŒç»´ç .jpeg'],
          details: `Steve Chenï¼Œä»ä¸š15å¹´çš„èµ„æ·±æˆ¿å±‹è´·æ¬¾ç»çºªã€‚é¡¶å°–çš„å›¢é˜Ÿï¼Œå‡­è—‰æ‰å®ä¸“ä¸šçŸ¥è¯†ã€ä¸°å¯Œæ²Ÿé€šæŠ€å·§ã€å’Œå¤šå¹´çš„å®æˆ˜ç»éªŒï¼Œå¸®åŠ©äº†è¶…è¿‡5000ä¸ªå®¶åº­åœ¨ç¾å›½å®Œæˆè´­å±‹çš„æ¢¦æƒ³ï¼`,
        },
        hanfushe: {
          name: 'hanfushe',
          tier: 'collaborator',
          logo: '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-ç¡…è°·æ±‰æœç¤¾/logo.jpg',
          qrCode: [
            '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-ç¡…è°·æ±‰æœç¤¾/logoç®€ä»‹.jpg',
            '/images/2024-map/sponsors/å‹æƒ…åˆä½œ-ç¡…è°·æ±‰æœç¤¾/äºŒç»´ç .jpg',
          ],
          details: '',
        },
      };
      const collaboratorsList = [
        'HeCares',
        'sjusv',
        'chihuo',
        'taiyangshen',
        'xigu',
        'tuokouxiu',
        'aaya',
        'berryfun',
        'hanfushe',
      ];
      const sponsorsList = [
        '99ranch',
        'balance-better',
        'juso',
        'lingoace',
        'tradeup',
        'fangtai',
        'fantuan',
        'ipg',
        'steve',
      ];

      const sponsorsIndex = [
        'HeCares',
        'sjusv',
        'chihuo',
        'taiyangshen',
        'xigu',
        'tuokouxiu',
        'aaya',
        'berryfun',
        '99ranch',
        'balance-better',
        'juso',
        'lingoace',
        'tradeup',
        'fangtai',
        'fantuan',
        'ipg',
        'steve',
      ];

      const sponsorsListHTML = sponsorsList
        .map((sponsor, i) => {
          const info = sponsorsAndCollaboratorsMap[sponsor];
          return `
  <div class="sponsor-logo tier-${info.tier}" data-sponsor="${sponsor}">
    <img class="tire-icon" src="/images/2024-map/icon-${info.tier}.png" alt="" />
    <input class="active-selected-sponsor" name="selected-sponsor" type="radio" ${
      i === 0 ? 'checked' : ''
    } />
    <div class="logo-container">
    <img data-sponsor="${sponsor}"
      tabindex="0"
      class="logo-img"
      src="${info.logo}"
      alt="${info.name}"
    />
    </div>
  </div>
  `;
        })
        .join('');

      const collaboratorsListHTML = collaboratorsList
        .map((sponsor, i) => {
          const info = sponsorsAndCollaboratorsMap[sponsor];
          return `
  <div class="sponsor-logo tier-collaborator" data-sponsor="${sponsor}">
    <input class="active-selected-sponsor" name="selected-sponsor" type="radio" ${
      i === 0 ? 'checked' : ''
    } />
    <div  class="logo-container">
    <img
    data-sponsor="${sponsor}"
      class="logo-img"
      src="${info.logo}"
      alt="${info.name}"
    />
    </div>
  </div>
  `;
        })
        .join('');
    </script>

    <!-- æ‘Šä½ä¿¡æ¯åŠç”Ÿæˆå¯¹åº” html -->
    <script>
      const sectionNames = {
        cuisine: 'cuisine',
        kids: 'kids',
        traditions: 'traditions',
        functions: 'functions',
      };
      const cuisinesList = [
        {
          stampIndex: 'cuisine-1',
          sectionIndexes: [1],
          name: 'å·´ä¹é—¨çƒ§çƒ¤',
          checkin: false,
          price: '$10 - $15',
          details: '',
        },
        {
          stampIndex: 'cuisine-2',
          sectionIndexes: [2],
          name: 'ç”˜äº†è”—æ¯',
          checkin: true,
          checkinCondition: 'ä¹°3ç“¶ä»¥ä¸Š',
          price: '$10',
          details: `Fresh squeezed sugarcane juice always bring fresh , sweet , nutrition .  `,
        },
        {
          stampIndex: 'cuisine-3',
          sectionIndexes: [3],
          name: 'æ²™å¿å°åƒ',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡30',
          price: '$8 - $12',
          details: `å›½æ°‘å°åƒï¼Œåœ¨ä¸­å›½å®¶å–»æˆ·æ™“çš„æ²™å¿å°åƒ`,
        },
        {
          stampIndex: 'cuisine-4',
          sectionIndexes: [4],
          name: 'HE & C Tea + Pot',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡40æˆ–è´­ä¹°5ä»¶ä»¥ä¸Šä¸åŒçš„å•†å“',
          price: 'Around $8',
          details: `He& C believes that a cup of tea not only letting us enjoy the symbolic taste but also giving us a quiet and peaceful atmosphere of respect. This calm and peaceful cup helps relieve stress and fatigue. HE&C is fully committed to using the best tea to serve our community and find a beautiful balance in our life.`,
        },
        {
          stampIndex: 'cuisine-5',
          sectionIndexes: [5],
          name: 'ä¹¦äº¦çƒ§ä»™è‰',
          checkin: false,
          price: '$7 - $9',
          details: `ä¹¦äº¦çƒ§ä»™è‰ï¼ˆShuyi Grass Jelly & Teaï¼‰æ˜¯ä¸€ä¸ªæºè‡ªä¸­å›½çš„çŸ¥åèŒ¶é¥®å“ç‰Œï¼Œä»¥ä¼ ç»Ÿçš„çƒ§ä»™è‰å’Œåˆ›æ–°èŒ¶é¥®ä¸ºæ ¸å¿ƒäº§å“ï¼Œæ·±å—æ¶ˆè´¹è€…å–œçˆ±ã€‚å…¶å“ç‰Œç†å¿µæ˜¯ä¼ æ‰¿ä¼ ç»ŸèŒ¶æ–‡åŒ–ï¼ŒåŒæ—¶é€šè¿‡åˆ›æ–°çš„æ–¹å¼èå…¥ç°ä»£å…ƒç´ ï¼Œæ‰“é€ å‡ºå…·æœ‰ç‹¬ç‰¹é£å‘³å’Œå¥åº·ç‰¹è‰²çš„é¥®å“ã€‚ä¹¦äº¦çƒ§ä»™è‰ä¸ä»…æ³¨é‡äº§å“çš„å£æ„Ÿå’Œå“è´¨ï¼Œè¿˜æ³¨é‡é€‰ç”¨é«˜å“è´¨çš„åŸææ–™ï¼Œå¦‚æ–°é²œæ°´æœã€ä¼˜è´¨èŒ¶å¶å’Œå¤©ç„¶é£Ÿæã€‚`,
        },
        {
          stampIndex: 'cuisine-6',
          sectionIndexes: [6],
          name: 'è²‚ç‚¸å¤©',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'cuisine-7',
          sectionIndexes: [7],
          name: 'å¯Œè´µæŸ æ‰‹æ‰“æŸ æª¬èŒ¶',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡$30',
          price: '$10 - $15',
          details: '',
        },
        {
          stampIndex: 'cuisine-8',
          sectionIndexes: [8],
          name: 'CAFÃ‰ KAZKA',
          checkin: true,
          price: '$10',
          details: '',
        },
        {
          stampIndex: 'cuisine-9',
          sectionIndexes: [9],
          name: 'å£«æ—å°æ¹¾å°åƒ',
          checkin: true,
          price: '$12 - $15',
          details: '',
        },
        {
          stampIndex: 'cuisine-10',
          sectionIndexes: [10],
          name: '99å¤§è¯',
          checkin: true,
          details: '',
        },
      ];
      const kidsList = [
        {
          stampIndex: 'kids-1',
          sectionIndexes: [1],
          name: 'è·ƒåŠ¨å¤©åœ°',
          checkin: true,
          free: true,
          checkinCondition: {
            html: `
          <div>
            <ul>
              <li>
                [Diabolo]
                <ul>
                  <li>For 13 and under: Play the diablo continuously for 10 seconds</li>
                  <li>For 14 and above: Play the diablo continuously for 20 seconds</li>
                </ul>
              </li>
              <li>
                [Pitch Pot]
                <ul>
                  <li>For all age range: Make 2 or more out of 10 total attempts</li>
                </ul>
              </li>
              <li>
                [Jianzi]
                <ul>
                  <li>For 13 and under: Get 3 in a row without dropping</li>
                  <li>For 14 and above: Get 5 in a row without dropping</li>
                </ul>
              </li>
              <li>
                [Jump Rope]
                <ul>
                  <li>For 13 and under: Do 20 continuously without tripping</li>
                  <li>For 14 and above: Do 30</li>
                </ul>
              </li>
            </ul>
          </div>
            `,
          },
          price: '$0',
          details: `é€šè¿‡å®ŒæˆæŠ–ç©ºç«¹ï¼ŒæŠ•å£¶ï¼Œè¸¢é”®å­ï¼Œæˆ–è€…è·³ç»³ï¼Œæ¥è·å–æ´»åŠ¨å¾½ç« ï¼
Get a stamp by Diabolo, Pitch Pot, Jianzi, or rope jumping! `,
        },
        {
          stampIndex: 'kids-2',
          sectionIndexes: [2],
          name: 'å å ä¹',
          checkin: true,
          free: true,
          price: '$0',
          details: `ç”±ç©å®¶è½®æµå°†ä¸‹æ–¹çš„ç§¯æœ¨æŠ½å‡ºï¼Œå †å åˆ°å¡”çš„æœ€ä¸Šå±‚ã€‚ ç§¯æœ¨å¡”å€’å¡Œå³ä¸ºæ¸¸æˆç»“æŸï¼Œæœ€åç§»åŠ¨ç§¯æœ¨çš„ç©å®¶ä¸ºè¾“ã€‚
Take one block on a turn from any level of the tower (except the one below an incomplete top level), and place it on the topmost level in order to complete it. The game ends when the tower falls -- completely or if any block falls from the tower (other than the block a player moves on a turn). `,
        },
        {
          stampIndex: 'kids-3',
          sectionIndexes: [3],
          name: 'é’“é±¼',
          checkin: true,
          free: true,
          price: '$0',
          details: `å„¿ç«¥é’“é±¼å°æ¸¸æˆã€‚
Fishing Game for children. `,
        },
        {
          stampIndex: 'kids-4',
          sectionIndexes: [4],
          name: 'Silicon Valley Youth',
          checkin: true,
          checkinCondition: 'å®Œæˆæ‘Šä½æ´»åŠ¨',
          price: '$3',
          includedInTicket: true,
          details: `ã€ç»„ç»‡ä»‹ç»ã€‘
Silicon Valley Youth is a student-run nonprofit educational and community service organization under the provisions of section 501(c)(3) of the Internal Revenue Code.
Our mission is to develop the intellectual, moral, civic, and creative capabilities of youth so they can serve and lead our society.
Silicon Valley Youth is an official certifying organization for the President's Volunteer Service Award.
All profits go toward supporting education and creating equal opportunities for all students.
ã€æ‘Šä½æ´»åŠ¨ã€‘
1. æŠ•å£ºéŠæˆ²ï¼šè½®æµå°†ç®­æ†æŠ•æŠ›è‡³é…’å£¶å†…
2. æœ‰å¥–é—®ç­”æ¸¸æˆï¼šç«¶ç­”ä¸åŒç±»å‹çš„é¢˜ç›®æ›çå“`,
        },
        {
          stampIndex: 'kids-5',
          sectionIndexes: [5],
          name: 'ç™¾å˜æ°”çƒ',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `ä¸€èµ·æ¥åˆ¶ä½œå½¢çŠ¶ç™¾å˜çš„æ°”çƒå§ï¼
Let's twist balloons to inspire your creativity! `,
        },
        {
          stampIndex: 'kids-6',
          sectionIndexes: [6],
          name: 'è‡ªåˆ¶å¾½ç« ',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `ä¸€èµ·æ¥åˆ¶ä½œç‹¬å±äºä½ çš„å¾½ç« å§ï¼
DIY your unique badge here! `,
        },
        {
          stampIndex: 'kids-7',
          sectionIndexes: [7],
          name: 'æ¼†æ‰‡',
          checkin: true,
          price: '$6',
          includedInTicket: true,
          details: `ä»¥æ¼†ä¸ºç¬”ï¼Œä»¥æ°´ä¸ºå¢¨ï¼Œå…·æœ‰ç»ç¾ä¸œæ–¹è‰²å½©çš„â€œæ¼†æ‰‡â€ä¹Ÿç”±æ­¤è€Œç”Ÿï¼Œæ¼†æ‰‡ï¼Œä»¥æ‰‡å­ä¸ºè½½ä½“ï¼Œè¿ç”¨å›½å®¶çº§éé—æ¼†æŸ“å·¥è‰ºæ‰‹å·¥æŸ“åˆ¶è€Œæˆçš„è‰ºæœ¯å“ã€‚è½½æ­Œåœ¨è°·æ¼†æ‰‡é“ºå­å°†å¸®åŠ©æ¯ä¸€ä½é¡¾å®¢åˆ¶ä½œå®Œæˆå±äºè‡ªå·±çš„ï¼Œç‹¬ä¸€æ— äºŒçš„æ‰‡å­ã€‚
æ¼†æ‰‡çš„ä¸»é¢˜å°†åœ¨ä¸åŒæ—¶æ®µæä¾›ï¼šè·å¡˜æœˆè‰²ï¼Œèœç±½èŠ±ç”°ï¼Œç´«æ°”ä¸œæ¥ï¼Œåé‡ŒèŠ³è²ï¼Œè½æ—¥æ™šéœï¼Œè“è‰²æ˜Ÿçƒï¼Œé˜¿å‹’æ³°ç­‰è‰²ç³»ã€‚
Use lacquer as the brush and water as the ink to create your own lacquer fan artwork! Themes for the lacquer fans will be offered at different times, including: 'Lotus Pond Under Moonlight,' 'Rapeseed Flower Field,' 'Purple Aura From the East,' 'Ten Miles of Fragrance,' 'Sunset Glow,' 'Blue Planet,' and 'Altay,' among others.`,
        },
        {
          stampIndex: 'kids-8',
          sectionIndexes: [8],
          name: 'ä¸‡èŠ±ç­’',
          checkin: true,
          price: '$3',
          includedInTicket: true,
          details: `ä¸‡èŠ±ç­’DIYåˆ¶ä½œï¼Œå·¥ä½œäººå‘˜æä¾›ææ–™å’ŒæŒ‡å¯¼ï¼Œå¿«æ¥åˆ¶ä½œå±äºè‡ªå·±ç‹¬ä¸€æ— äºŒçš„ä¸‡èŠ±ç­’å§ï¼
Let's DIY your unique Kaleidoscope together! `,
        },
        {
          stampIndex: 'kids-9',
          sectionIndexes: [9],
          name: 'é—ªäº®ç”»è‰ºåŠ',
          checkin: true,
          price: 'é’»çŸ³ç”» $3',
          includedInTicket: true,
          details: `é—ªäº®ç”»è‰ºåŠä¸“é—¨ä¸ºæ‚¨æä¾›ç¾ä¸½é—ªè€€çš„é’»çŸ³è´´ç”»å’Œç‚«å½©åˆ®ç”»çº¸ã€‚æ— è®ºæ˜¯å„¿ç«¥ã€è¿˜æ˜¯å–œæ¬¢DIYçš„æˆäººï¼Œåœ¨æˆ‘ä»¬çš„åº—é“ºéƒ½èƒ½ä½“éªŒåˆ›ä½œçš„ä¹è¶£å’Œæˆå°±æ„Ÿã€‚
DIY diamond paintings by sticking small resin 'diamonds' onto a canvas to create a mosaic-like picture. Or DIY a colorful scratch art painting by scratching off black coating to reveal colorful patterns underneath. `,
        },
        {
          stampIndex: 'kids-10',
          sectionIndexes: [10],
          name: 'æ´»å­—å°åˆ·',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `å°è¯•ä½¿ç”¨æ´»å­—å°åˆ·æ¥åˆ¶ä½œä½ çš„å°åˆ·ä½œå“å§ï¼
Let's try the traditional movable type printing to create your own piece! `,
        },
        {
          stampIndex: 'kids-11',
          sectionIndexes: [11],
          name: 'é¢éƒ¨å½©ç»˜',
          checkin: true,
          details: `å¿—æ„¿è€…å°†ä¸ºæ‚¨æä¾›ç”»è„¸æœåŠ¡ã€‚
We'll paint on your face! `,
        },
        {
          stampIndex: 'kids-12',
          sectionIndexes: [12],
          name: 'LingoAce',
          checkin: true,
          price: 'æˆäºº $10ï¼Œå„¿ç«¥ $5',
          details: '',
        },
        {
          stampIndex: 'kids-13',
          sectionIndexes: [13],
          name: 'å¤ªé˜³ç¥ç¾é™¢',
          checkin: true,
          details: '',
        },
      ];
      const traditionsList = [
        {
          stampIndex: 'chinese-1',
          sectionIndexes: [1],
          name: 'ä¹¦æ³•',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `ä¹¦æ³•ç»ƒä¹ ï¼Œåœ¨ç¯ç¬¼ä¸Šä¹¦å†™æˆ–ç»˜ç”»ã€‚
Let's practice calligraphy by writing and drawing on lanterns!`,
        },
        {
          stampIndex: 'chinese-2',
          sectionIndexes: [2],
          name: 'ç¯è°œ',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `è‡ªé€‰3ä¸ªç¯è°œï¼Œç­”å¯¹ç›–ç« ã€‚
Choose 3 lantern riddles, get a stamp if you got the correct answers.`,
        },
        {
          stampIndex: 'chinese-3',
          sectionIndexes: [3],
          name: 'è¯—è¯å¤§ä¼š',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `é£èŠ±ä»¤ï¼Œè¯—è¯æŠ½ç­¾ã€‚
Fei Hua Ling & Poetry Lottery. `,
        },
        {
          stampIndex: 'chinese-4',
          sectionIndexes: [4],
          name: 'ä¸€æ¸¸æœªå°½æ¡Œæ¸¸',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡30',
          price: '$10 - $50',
          details: `Tobyâ€™s Board Game Club offers a wide range of services to enhance your board game experience. Our knowledgeable staff can recommend and teach you games, and help you find partners to play with. We also offer selections of board games and blind boxes to purchase at the store.`,
        },
        {
          stampIndex: 'chinese-5',
          sectionIndexes: [5],
          name: 'Cookieâ€™s Treatå® ç‰©çƒ˜ç„™',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡30',
          price: '$8 - $36',
          details: '',
        },
        {
          stampIndex: 'chinese-6',
          sectionIndexes: [6],
          name: '24:01 Bloom & Craft',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡25',
          price: '$10 - $50',
          details: '',
        },
        {
          stampIndex: 'chinese-7',
          sectionIndexes: [7],
          name: 'èŒ‰èŒ‰æ‰‹ä½œ',
          checkin: true,
          checkinCondition:
            'æˆ‘ä»¬æ˜¯ä¸€å®¶å®ä½“åº—é“ºï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åº—é“ºçš„ç¤¾äº¤è´¦å·å¼•æµï¼Œå¹¶ä¸”å°½å¯èƒ½çš„é¿å…å¼ºåˆ¶æ¶ˆè´¹ã€‚æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›æ˜¯å…³æ³¨å°çº¢ä¹¦æˆ–è€…Insï¼Œå¹¶ä¸”åŠ å…¥å¾®ä¿¡ç¾¤å³å¯è·å¾—ç›–ç« ã€‚å¦‚éœ€è¦æé«˜é—¨æ§›ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§æ¶ˆè´¹$15è®¡ç®—ã€‚',
          price: '$3 - $100',
          details: `Hereâ€™s a more polished and attractive version:  ---  **Momo Handmade** is a women-led local business where every day is an invitation to create, relax, and explore culture through the beauty of handcrafted art. We specialize in offering professional courses on intangible cultural heritage crafts, providing an extensive selection of premium materials and an inspiring environment for DIY projects. At Momo Handmade, we empower you to develop new skills, unwind from daily stresses, enhance your artistic sense, and connect with the rich traditions of craftsmanship. Embrace the joy of making something meaningful with us.`,
        },
        {
          stampIndex: 'chinese-8',
          sectionIndexes: [8],
          name: 'Squishyverse',
          checkin: true,
          checkinCondition: 'æ»¡$35-$5',
          details: '',
        },
        {
          stampIndex: 'chinese-9',
          sectionIndexes: [9],
          name: 'ç»‡æœˆäº®',
          checkin: true,
          checkinCondition: 'æ¶ˆè´¹æ»¡30',
          price: '$4.99 - $22.99',
          details: '',
        },
        {
          stampIndex: 'chinese-10',
          sectionIndexes: [10],
          name: 'å¤©å·¥åŠ',
          checkin: true,
          price: 'æˆäºº $10ï¼Œå„¿ç«¥ $2',
          includedInTicket: true,
          details: `1.æˆäººåŒº(14å²ä»¥ä¸Šï¼‰-ä»å·¥ä½œäººå‘˜å¤„é¢†å–ææ–™ï¼Œå¼€å§‹åˆ›ä½œã€‚
2.å„¿ç«¥åŒº-å·¥ä½œäººå‘˜ååŠ©å°æœ‹å‹è¿›è¡Œåˆ¶ä½œã€‚å› èƒ¶æªçƒ­åº¦ï¼Œå°æœ‹å‹ä¸å¯ä»¥å•ç‹¬è¿›è¡Œåˆ¶ä½œã€‚
1. Adults (>14 years of age) - Pick up materials from the staff and start creating.
2. Children (<=14 years old) - Ask our staff for assistance. Participants need to be accompanied by our staff because of the glue gun's high temperature.`,
        },
        {
          stampIndex: 'chinese-11',
          sectionIndexes: [11],
          name: 'JUSOå±…æ‰€ä¼‘æ¯ç©ºé—´',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'chinese-12',
          sectionIndexes: [12],
          name: 'è®¸æ„¿å¢™',
          checkin: true,
          price: '$2',
          includedInTicket: true,
          details: `è®¸æ„¿å¢™ä»å·¥ä½œäººå‘˜å¤„é¢†å–è®¸æ„¿å¡ï¼Œå†™ä¸‹å¿ƒæ„¿æˆ–ç¥ˆç¦ã€‚æ‚¬æŒ‚åœ¨æŒ‡å®šåœ°ç‚¹ã€‚è¡¨è¾¾å¯¹æœªæ¥çš„æœŸæœ›å’Œç¥ˆæ„¿ã€‚ 
A wishing wall allows participants to receive wishing cards from the staff, write down their wishes or prayers, and hang them in a designated area. This process expresses their hopes and blessings for the future.`,
        },
        {
          stampIndex: 'chinese-13',
          sectionIndexes: [13],
          name: 'KissFingers Press-on Nails',
          checkin: true,
          checkinCondition: 'è´­ä¹° 3 ä»¶å•†å“ä»¥ä¸Š',
          price: '$15 - $25',
          details: `all hand made press on nails. Asian style. paint on nails è´­ä¹°3ä»¶å•†å“ä»¥ä¸Šå¯ç›–ç« `,
        },
        {
          stampIndex: 'chinese-14',
          sectionIndexes: [14],
          name: 'AIæ±‰æœç…§ç‰‡ä¹¦',
          checkin: true,
          price: '$0 - $100',
          details: `ç”¨AIå®šåˆ¶æ±‰æœå†™çœŸç…§ å¹¶æ‰“å°æˆç…§ç‰‡ä¹¦`,
        },
        {
          stampIndex: 'chinese-15',
          sectionIndexes: [15],
          name: 'Luckydodo',
          checkin: true,
          price: '$1 - $15',
          details: '',
        },
        {
          stampIndex: 'chinese-16',
          sectionIndexes: [16],
          name: 'æ±‰æœå¦†é€ ',
          checkin: true,
          price: '$40',
          details: `å¤é£åŒ–å¦†ï¼Œåšå¤é£å‘å‹ã€‚
Chinese traditional makeup and hair styling.`,
        },
        {
          stampIndex: 'chinese-17',
          sectionIndexes: [17],
          name: 'æ‹ç…§å¢™&å¤ç´',
          checkin: true,
          free: true,
          price: '$0',
          details: '',
        },
        {
          stampIndex: 'chinese-18',
          sectionIndexes: [18],
          name: 'Taroå§»ç¼˜å¢™ & æˆè°·å‰§å›¢',
          checkin: true,
          price: '$5',
          includedInTicket: true,
          details: '',
        },
        {
          stampIndex: 'chinese-19',
          sectionIndexes: [19],
          name: 'ç³–ç”»',
          checkin: true,
          price: '$6',
          includedInTicket: true,
          details: `è‡ªå·±åˆ›ä½œæˆ–ä¸´æ‘¹åº•å›¾ï¼Œæ¥åˆ›é€ ç‹¬ç‰¹çš„ç³–ç”»å§ï¼
Let's create your own sugar painting from scratch, or using the template we provide! `,
        },
      ];
      const functionsList = [
        {
          stampIndex: 'function-1',
          sectionIndexes: [1],
          name: 'å¿—æ„¿è€…ä¼‘æ¯åŒº1',
          checkin: false,
          details: '',
        },
        {
          stampIndex: 'function-2',
          sectionIndexes: [2],
          name: 'å¤±ç‰©æ‹›é¢†å¤„',
          checkin: false,
          details: '',
        },
        {
          stampIndex: 'function-3',
          sectionIndexes: [3],
          name: 'è½½æ­Œåœ¨è°· - äº‘é›†',
          checkin: true,
          price: '$0',
          details: `äº‘é›†æ˜¯è½½æ­Œåœ¨è°·æ——ä¸‹å„ç§ç¤¾å›¢çš„é›†åˆï¼Œè¿è¥ç»„ä¼šååŠ©å¤§å®¶å®šæœŸä¸¾åŠå›¢å»ºæ´»åŠ¨ï¼Œé€šè¿‡å…±åŒçš„å…´è¶£çˆ±å¥½ç›¸äº’äº†è§£ï¼Œä¸€èµ·æäº‹æƒ…ğŸ˜ğŸ¥°ğŸ‘æˆ‘ä»¬çš„å››å¤§ç¤¾å›¢åˆ†åˆ«æ˜¯ï¼š
âœ…ã€èŒã€‘æŒ‚äº‘å¸†ï¼šèŒåœºåˆ†äº«ç±»ğŸ§‘â€ğŸ’»ğŸ’¼
âœ…ã€ä¹¦ã€‘å½±å©†å¨‘ï¼šè¯»ä¹¦è§‚å½±ğŸ“–ğŸ¬
âœ…ä½“ã€å¨±ã€‘é£äº‘ï¼šä½“è‚²å¨±ä¹ç±»ğŸ€ğŸ¹
âœ…ä¸€é¥±ã€æ¼”ã€‘ç¦ï¼šæ–‡è‰ºè¡¨æ¼”ç±»ğŸµğŸ’ƒ
We are the gallery of activity clubs in ZGZG. Come to join us on weekends! We host a variety of Event - workplace skills-sharing seminars, book / movie nights, sports events, and musical performances. `,
        },
        {
          stampIndex: 'function-4',
          sectionIndexes: [4],
          name: 'é¥­å›¢',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'function-5',
          sectionIndexes: [5],
          name: 'Balance & Better Family Financial',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'function-6',
          sectionIndexes: [6],
          name: 'è€è™è¯åˆ¸',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'function-78',
          sectionIndexes: [7, 8],
          name: 'ç­¾åˆ°/å…‘å¥–å¤„1',
          checkin: false,
          details: '',
        },
        {
          stampIndex: 'function-9',
          sectionIndexes: [9],
          name: 'HeCaresæ€¥æ•‘ç«™',
          checkin: true,
          details: '',
        },
        {
          stampIndex: 'function-10',
          sectionIndexes: [10],
          name: 'å¿—æ„¿è€…ä¼‘æ¯åŒº2',
          checkin: false,
          details: '',
        },
        {
          stampIndex: 'function-1112',
          sectionIndexes: [11, 12],
          name: 'ç­¾åˆ°/å…‘å¥–å¤„2',
          checkin: false,
          details: '',
        },
        {
          stampIndex: 'function-13',
          sectionIndexes: [13],
          name: 'æ–¹å¤ª',
          checkin: true,
          details: '',
        },
      ];

      const allBooths = [...cuisinesList, ...kidsList, ...traditionsList, ...functionsList];

      function generateBoothListHTML(boothList, sectionName) {
        const collectedStamps = Cookies.getJSON('collectedStamps');
        return boothList
          .map((booth) => {
            let stampStatus = '';
            if (booth.checkin && collectedStamps?.includes(booth.stampIndex)) {
              stampStatus = `<div class="booth-stamp-status booth-tag">âœ…</div>`;
            }
            const supportCheckin = booth.checkin
              ? `<div class="booth-tag" style="
                    color: rgb(206,15,4);
                    background: rgb(247,216,215);
                    border-radius: 4px;
                    width: 1.4rem;
                    height: 1.4rem;
                    text-align: center;
                    display: flex;
                    align-content: center;
                    justify-content: center;
                    align-items: center;
                ">ç« </div>`
              : '';
            const includedInTicket = booth.includedInTicket
              ? `<div class="booth-tag" style="
                    color: rgb(156,88,2);
                    background: rgb(239,228,214);
                    border-radius: 4px;
                    width: 1.4rem;
                    height: 1.4rem;
                    text-align: center;
                    display: flex;
                    align-content: center;
                    justify-content: center;
                    align-items: center;
                ">ç•…</div>`
              : '';
            const free = booth.free
              ? `<div class="booth-tag" style="
                    color: rgb(48,176,199);
                    background: rgb(222,242,246);
                    border-radius: 4px;
                    width: 1.4rem;
                    height: 1.4rem;
                    text-align: center;
                    display: flex;
                    align-content: center;
                    justify-content: center;
                    align-items: center;
                ">å…</div>`
              : '';

            const sectionIndexHtmls = booth.sectionIndexes
              .map((index) => {
                return `<div class="booth-number booth-section-${sectionName}">${index}</div>`;
              })
              .join('');

            return `<div class="booth-card" data-booth-name="${booth.name}">
            ${sectionIndexHtmls}
            <div class="booth-name">${booth.name}</div>
            <div class="booth-tags">
              ${stampStatus}
              ${supportCheckin}
              ${includedInTicket}
              ${free}
            </div>
            <div style="height: 100%;
                  width: 1rem;
                  display: flex;
                  justify-content: center;
                  align-content: center;
                  align-items: center;
                  margin-right: 0.5rem;">
              <img src="/images/2024-map/arrow.png" alt="" style="object-fit: contain;
    height: 1.2rem; transform: translate(0px, 2px);"/>
            </div>
            <div class="arrow"></div>
          </div>`;
          })
          .join('');
      }

      function openBoothDetails(e) {
        const boothName = e.currentTarget.getAttribute('data-booth-name');

        const selectedBooth = allBooths.find((b) => b.name === boothName);

        let checkinCondition = '';

        if (selectedBooth.checkin && selectedBooth.checkinCondition) {
          if (selectedBooth.checkinCondition.html) {
            checkinCondition = `
              <h3 style="text-align: center;">æ‰“å¡æ¡ä»¶</h3>
              ${selectedBooth.checkinCondition.html}
            `;
          } else {
            checkinCondition = `
              <h3 style="text-align: center;">æ‰“å¡æ¡ä»¶</h3>
              ${selectedBooth.checkinCondition}
              `;
          }
        }

        boothDetailsEle.innerHTML = `
          <div style="display: flex;
              flex-wrap: wrap;
              align-content: center;
              justify-content: center;
              align-items: center;">
            <h2>${boothName}</h2>
            <div>
              ${selectedBooth.details}
            </div>
            <div style="    width: 100%;
    text-align: center;">
              ${checkinCondition}
              </div>
            </div>
          `;
        boothDetailsEle.classList.remove('display-none');

        returnToBoothListBtn.classList.remove('display-none');

        boothListEle.classList.add('display-none');
      }

      function returnToBoothList() {
        boothDetailsEle.classList.add('display-none');
        boothListEle.classList.remove('display-none');
        returnToBoothListBtn.classList.add('display-none');
        boothDetailsEle.scrollTop = 0;
      }

      let cuisinesListHTML = generateBoothListHTML(cuisinesList, sectionNames.cuisine);
      let kidsListHTML = generateBoothListHTML(kidsList, sectionNames.kids);
      let traditionsListHTML = generateBoothListHTML(traditionsList, sectionNames.traditions);
      let functionsListHTML = generateBoothListHTML(functionsList, sectionNames.functions);
    </script>

    <!-- ç”ŸæˆäºŒç»´ç  -->
    <script>
      function generateQR() {
        const phone = Cookies.get('phone');
        const url = `https://zgzg.io/stamp?phone=${phone}`;
        if (siteStates.qrCodeEle) {
          return;
        } else {
          const ele = document.createElement('DIV');
          new QRCode(ele, {
            text: url,
            width: 200,
            height: 200,
            colorDark: 'red',
            colorLight: '#ffffff',
            correctLevel: QRCode.CorrectLevel.H,
          });
          siteStates.qrCodeEle = ele;
        }
      }
    </script>

    <!-- æ‰“å¼€æ‰“å¡è®°å½•å¼¹çª—åŠè·å–æ‰“å¡ä¿¡æ¯ -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js';
      import {
        collection,
        query,
        where,
        getDocs,
        getFirestore,
      } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js';

      const firebaseConfig = {
        apiKey: 'AIzaSyA32iYcPDmH7MJLFKpadSkUuR4K3avEYeA',
        authDomain: 'zgzg-9e6d0.firebaseapp.com',
        projectId: 'zgzg-9e6d0',
        storageBucket: 'zgzg-9e6d0.appspot.com',
        messagingSenderId: '807744488876',
        appId: '1:807744488876:web:bf6ddbfe0b5ab49f216609',
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      const db = getFirestore(app);

      window.firebaseQuery = query(collection(db, 'stamps'), where('phone', '==', '7895643212'));
      window.getDocs = getDocs;
    </script>

    <!-- CSS resetting å’Œ å…¨å±€ class -->
    <style>
      body {
        padding: 0;
        margin: 0;
        overflow: hidden;
        height: 0;
        background-color: #ffeeab;
        font-family: sans-serif;
        /* é˜²æ­¢ iOS safari ç¼©æ”¾ */
        touch-action: pan-x pan-y;
      }

      .display-block {
        display: block !important;
      }

      .display-none {
        display: none !important;
      }
      .btn-close {
        position: absolute;
        right: 0.5rem;
        top: 0.5rem;
        height: 2rem;
        width: 2rem;
        background: white;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        font-size: 1.5rem;
        font-weight: bolder;
        text-align: center;
      }
    </style>

    <!-- Map Styles -->
    <style>
      #map-container {
        max-width: 100vw;
        /* max-height: calc(100vh - env(safe-area-inset-bottom)); */
        width: 100vw;
        /* height: calc(100vh - env(safe-area-inset-bottom)); */
        overflow: hidden;
      }
      #map {
        width: 100%;
        object-fit: contain;
        /* height: 100%; */
      }
    </style>

    <!-- Drawer Styles -->
    <style>
      #drawer {
        z-index: 100;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
        box-shadow: 0px -3px 27px 14px #0000007d;
      }

      #drawer-slider-container {
        display: flex;
        justify-content: center;
      }

      #drawer-slider {
        width: 65px;
        height: 7px;
        border-radius: 16px;
        margin-top: 5px;
        border: none;
      }

      .drawer-tab-group {
        display: flex;
        justify-content: space-between;
        margin: 1rem 1rem 0 1rem;
      }

      .drawer-tab {
        padding: 0.5rem 1rem;
        border-radius: 0.7rem;
        min-width: 4rem;
        display: flex;
        justify-content: center;
        background-color: #ffd400;
      }

      .drawer-tab__active {
        opacity: 100%;
      }

      .drawer-tab__inactive {
        opacity: 24%;
      }

      .drawer-content__container {
        margin: 1rem 1rem 0 1rem;
        overflow-y: scroll;
      }

      #drawer-content {
        animation-fill-mode: forwards;
        height: 3vh;
        /* width: 100vw; */
      }

      #drawer-content > * {
        max-width: 100%;
      }

      .drawer-open {
        animation-name: slideUp;

        animation-duration: 0.2s;
        animation-timing-function: ease-out;
      }

      .drawer-close {
        animation-name: slideDown;

        animation-duration: 0.2s;
        animation-timing-function: ease-out;
      }

      @keyframes slideUp {
        from {
          height: 3vh;
        }

        to {
          height: 60vh;
        }
      }

      @keyframes slideDown {
        from {
          height: 60vh;
        }

        to {
          height: 3vh;
        }
      }
    </style>

    <!-- èŠ‚ç›®å• æ ·å¼ -->
    <style>
      .show-info-card {
        position: relative;
      }
      .show-time {
        padding: 1rem 0;
        font-size: 1.5rem;
        font-weight: bold;
      }

      .show-info {
        left: 0;
        right: 0;
        height: 150px;
        backdrop-filter: grayscale(60%);
        position: absolute;
      }
      .show-title {
        font-size: 2rem;
        margin: 0.5rem;
      }
      .show-intro {
        margin: 0.5rem;
      }
      img.show-bg-img {
        object-fit: cover;
        width: 100%;
        height: 150px;
        border-radius: 0.5rem;
      }

      ul.show-list {
        background: #edf4f7;
        border-radius: 0.7rem;
        padding-right: 0.5rem;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        padding-inline-start: 2rem;
        margin-top: 0;
      }
      .show-list-time {
        padding-left: 1rem;
        margin-bottom: 0.5rem;
        margin-top: 1.5rem;
      }

      .lottery-info {
        background: #edf4f7;
        border-radius: 0.7rem;
        padding: 0.5rem;
      }
      .lottery-info h4 {
        margin: 0;
        color: #ce0f04;
      }
      .lottery-info p {
        margin: 0.5rem 0;
      }
      .lottery-info ol {
        margin: 0;
      }
    </style>

    <!-- Sponsors Tab Styles -->
    <style>
      .sponsor-tab-group {
        display: flex;
        justify-content: space-between;
        /* margin-top: 1rem; */
        position: fixed;
        /* width: 100%; */
        z-index: 100;
        background: white;
        padding: 2px;
        left: 1rem;
        right: 1rem;
        border: 1px solid #f5be00;
        border-radius: 0.7rem;
      }
      #sponsorTabContainer {
        margin-top: 3rem;
      }

      .sponsor-tab {
        padding: 0.5rem 1rem;
        border-radius: 0.7rem;
        min-width: 4rem;
        display: flex;
        justify-content: center;
        background-color: #ffd400;
        width: 40%;
      }

      .sponsor-tab__active {
        opacity: 100%;
      }

      .sponsor-tab__inactive {
        opacity: 24%;
      }

      .sponsor-container {
        /* margin: 1rem 1rem 0 1rem; */
        overflow-y: scroll;
      }
      #sponsorLogoGroup {
        /* width: 500px; */
        /* height: 100px; */
        white-space: nowrap;
        position: relative;
        overflow-x: scroll;
        overflow-y: hidden;
        margin-top: 1rem;
      }
      .sponsor-logo {
        /* width: 100px; */
        /* background-color: #eee; */
        /* float: none; */
        /* height: 100px; */
        margin: 0 0.5rem;
        display: inline-block;
        /* zoom: 1; */
        position: relative;
      }

      .sponsor-logo img.logo-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        opacity: 0.2;
        -moz-opacity: 0.2; /* Firefox and Mozilla browsers */
        -webkit-opacity: 0.2;
      }

      .logo-container {
        /* border-radius: 100%; */
        /* border: 5px solid transparent; */
        padding: 3px;
        /* filter: opacity(0.5); */
        width: 100%;
        height: 100%;
      }

      .tier-platinum {
        width: 150px;
        height: 150px;
      }

      .tier-gold {
        width: 100px;
        height: 100px;
      }

      .tier-collaborator {
        width: 50px;
        height: 50px;
      }

      input.active-selected-sponsor {
        position: absolute;
        left: 0;
        top: 0;

        z-index: 1;
        opacity: 0;
        display: block;
      }

      input.active-selected-sponsor:checked + .logo-container > .logo-img {
        opacity: 1;
        -moz-opacity: 1; /* Firefox and Mozilla browsers */
        -webkit-opacity: 1;
      }

      img.tire-icon {
        position: absolute;
        width: 20px;
        height: 20px;
        right: 0;
        bottom: 0;
        z-index: 50;
      }

      .sponsor-details {
      }

      img.sponsor-qr {
        width: 100%;
        object-fit: contain;
      }
    </style>

    <!-- æ‰“å¡å…¥å£æ ·å¼ -->
    <style>
      .checkin-button-container {
        position: absolute;
        top: -62px;
        left: 0;
        right: 0;
        display: flex;
        height: 50px;
        justify-content: space-evenly;
      }

      .checkin-button {
        background: linear-gradient(45deg, rgba(240, 220, 220), rgb(254, 247, 216));
        border-radius: 0.7rem;
        width: 90%;
        display: flex;
        align-items: center;
      }

      .checkin-button-logo {
        object-fit: contain;
        height: 80%;
        margin-right: 10px;
        margin-left: 10px;
      }

      #showCheckinHistory,
      #showQRCode {
        background: linear-gradient(45deg, rgba(240, 220, 220), rgb(254, 247, 216));
        border-radius: 0.7rem;
        width: 45%;
        display: flex;
        align-items: center;
      }
    </style>

    <!-- æ‰“å¡è®°å½•å¼¹çª—æ ·å¼ -->
    <style>
      #checkinHistoryPopup {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, #ffe1b4, white);
        height: 80%;
        z-index: 200;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        box-shadow: 0px -68px 66px 27px #0000007d;
      }

      #checkinHistoryPopup h1 {
        text-align: center;
      }

      #checkinHistoryPopup p {
        text-align: center;
      }

      .stamp-cards-list {
        display: grid;
        padding: 0 1rem;
        /* flex-wrap: wrap; */
        justify-content: center;
        overflow-y: scroll;
        height: 70%;
        grid-template-columns: 40% 40%;
        gap: 10px;
        align-items: center;
        justify-items: center;
      }

      .stamp-card {
        position: relative;
        width: 100%;
        height: 125px;
        display: flex;
        /* align-content: center; */
        justify-content: center;
        align-items: center;
      }

      .stamp-name {
        font-size: 2.2rem;
        font-weight: bolder;
        text-align: center;
        justify-items: center;
      }

      .stamp-card img {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 5rem;
      }
    </style>

    <!-- è¾“å…¥æ‰‹æœºå·æ ·å¼ -->
    <style>
      #registerPopup {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, #ffe1b4, white);
        height: 50%;
        z-index: 200;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        box-shadow: 0px -68px 66px 27px #0000007d;
      }

      #registerPopup h1 {
        text-align: center;
      }
    </style>

    <!-- äºŒç»´ç å¼¹çª—æ ·å¼ -->
    <style>
      #qrCodePopup {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, #ffe1b4, white);
        height: 50%;
        z-index: 200;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        box-shadow: 0px -68px 66px 27px #0000007d;
      }

      #qrCodePopup h1 {
        text-align: center;
        margin-bottom: 0.2rem;
      }
      #qrCodePopup p {
        text-align: center;
        margin-top: 0;
      }

      #qrCodeContainer {
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>

    <!-- æ‘Šä½åˆ—è¡¨æ ·å¼ -->
    <style>
      #boothListPopup {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(180deg, #ffe1b4, white);
        height: 80%;
        z-index: 200;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
        box-shadow: 0px -68px 66px 27px #0000007d;
      }

      #boothListPopup h1 {
        text-align: center;
      }
      #boothList {
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow-y: scroll;
        height: 70%;
        padding-top: 1rem;
      }

      #boothDetails {
        padding: 0 1rem;
      }

      #returnToBoothListBtn {
        position: absolute;
        top: 0.5rem;
        left: 0.5rem;
        width: 1rem;
        height: 1rem;
        padding: 0.5rem;
        background-color: white;
        border-radius: 50%;
      }

      #returnToBoothListBtn img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        -moz-transform: scale(-1, -1);
        -o-transform: scale(-1, -1);
        -webkit-transform: scale(-1, -1);
        transform: scale(-1, -1);
      }
      .booth-card {
        margin-bottom: 1rem;
        border-radius: 0.7rem;
        border: 1px black solid;
        width: 90%;
        display: flex;
        align-items: center;
      }
      .booth-number {
        width: 2rem;
        height: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 10px;
        margin-right: 0;
        border-radius: 0.7rem;
        color: white;
        font-weight: bold;
      }
      .booth-name {
        display: flex;
        align-items: center;
        margin-left: 10px;
      }
      .booth-stamp-status {
        margin-left: auto;
      }

      .booth-tags {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-left: auto;
        margin-right: 0.5rem;
      }
      .booth-tag {
        height: 100%;
        margin-right: 0.3rem;
      }

      .booth-section-cuisine {
        background-color: #ff9500;
      }
      .booth-section-kids {
        background-color: #008c41;
      }
      .booth-section-traditions {
        background-color: #007aff;
      }
      .booth-section-functions {
        background-color: #ff2d55;
      }
    </style>

    <!-- ä¸­è‹±æ–‡åˆ‡æ¢æ–‡æœ¬è®¾å®š  -->
    <script>
      const i18nStrings = {
        'payInfo.coin': {
          zh: 'ä»£å¸æ”¯ä»˜',
          en: 'Coin',
        },
        'payInfo.cash': {
          zh: 'ç°é‡‘æ”¯ä»˜',
          en: 'Cash',
        },
        langSwitch: {
          zh: 'English',
          en: 'ä¸­æ–‡',
        },
        'drawer.tab.guide': {
          zh: 'æ¸¸å›­æŒ‡å—',
          en: 'Guide',
        },
        'drawer.tab.shows': {
          zh: 'èŠ‚ç›®å•',
          en: 'Shows',
        },
        'drawer.tab.guide.sponsors': {
          zh: 'èµåŠ©&åˆä½œ',
          en: 'Sponsors',
        },
      };
    </script>

    <!-- èŠ‚ç›®å•ä¿¡æ¯ -->
    <script>
      const showsList = [
        {
          title: 'æ¼”å‡ºæ ‡é¢˜',
          intro:
            'æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚',
          time: '12:00 PM',
          image: '/images/2024-map/content.png',
        },
        {
          title: 'æ¼”å‡ºæ ‡é¢˜',
          intro:
            'æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚',
          time: '12:00 PM',
          image: '/images/2024-map/content.png',
        },
        {
          title: 'æ¼”å‡ºæ ‡é¢˜',
          intro:
            'æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚',
          time: '12:00 PM',
          image: '/images/2024-map/content.png',
        },
        {
          title: 'æ¼”å‡ºæ ‡é¢˜',
          intro:
            'æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚æ¼”å‡ºç®€ä»‹ï¼Œæ²¡é”™ï¼Œå°±æ˜¯ç®€ä»‹ã€‚ä¸€ä¸¤å¥è¯ï¼Œä¸€ä¸¤è¡Œçš„é‚£ç§ã€‚',
          time: '12:00 PM',
          image: '/images/2024-map/content.png',
        },
      ];
    </script>

    <!-- é¡¶å±‚ tab åŠ¨æ€å†…å®¹ html -->
    <script>
      const tourGuideHTMLContent = `
      <img
              src="/images/2024-map/tourGuide.png"
              alt=""
            /> 
      `;
      // const showListHTMLContent = showsList
      //   .map((show) => {
      //     return `
      //   <div class="show-list-container">
      //         <div class="show-info-card">
      //           <div class="show-time">
      //             <span>${show.time}</span>
      //           </div>
      //           <div class="show-info">
      //             <div class="show-title">${show.title}</div>
      //             <div class="show-intro">
      //               ${show.intro}
      //             </div>
      //           </div>
      //           <img class="show-bg-img" src="${show.image}" alt="" />
      //         </div>
      //       </div>
      //   `;
      //   })
      //   .join('');
      const showListHTMLContent = `<div class="show-list-card">
              <h3 class="show-list-time">1:00 PM - 3:40 PM</h3>
              <ul class="show-list">
                <li>Batter UpÂ | Twinkle by Tingna Dance Studio</li>
                <li>Woman Up | Extremer</li>
                <li>å¼¦æ¨‚åœ˜é‡‘æ›²ä¸²ç‡’ Rhapsody String Ensemble | ç‹‚å“å¼¦ä¹å›¢</li>
                <li>Put your records on | Aevum Mistry</li>
                <li>èˆè¹ˆä¸²çƒ§ã€Šç©¿è¶Šã€‹ | DDèˆå›¢</li>
                <li>æ˜¯å¦ˆå¦ˆæ˜¯å¥³å„¿ | Zoe and Jade Worden</li>
                <li>å›½ä¹é›…ç§‹ The Fall Melody by Guqin, Bamboo flute and Hulusi | é›…éŸµå›½ä¹ç¤¾</li>
                <li>å°‘æ—é›„é£ | Shaolin Warrior Martial Arts</li>
                <li>ç¥¥ç‹®æ¬¢èˆè¿é‡‘ç§‹ | Leland High School Lion Dance Team</li>
                <li>åå¤æœ‰è¡£-æ±‰æœèµ°ç§€ Chinese Dress Fashion Show | ç¡…è°·æ±‰æœç¤¾</li>
                <li>å¤ç´æ¼”å¥ | å¤ªç„å¤ç´ç¤¾</li>
                <li>ä¼ æ‰¿ | Song's Kung Fu</li>
                <li>
                  å„¿ç«¥èˆè¹ˆã€ŠèŠ±æœ¨å…°ã€‹ã€Šæ£®æ—åœ†èˆæ›²ã€‹ã€Šå¥‡å¦™çš„å°ä»™å­ ã€‹| Dream Hope Star Dance Academy
                </li>
                <li>è¶Šå‰§æ¸…å”±ã€Šè¿½é±¼ã€‹ | Xiaowen Geng</li>
                <li>èˆè¹ˆ - çº¢æ˜­æ„¿ | 85Fun Studio</li>
                <li>æœˆå…‰+è¶ | ä¸æ¢¦</li>
                <li>ä¸­æç´ç‹¬å¥ã€Šæ¸”èˆŸå”±æ™šã€‹ | é»„ä½³è‰º</li>
                <li>ä¸­è‹±æ–‡æ­Œæ›²ä¸²çƒ§ Mashup | å…°å…°</li>
              </ul>
            </div>
            <div class="show-list-card">
              <h3 class="show-list-time">4:10 pm - 4:40 pm</h3>
              <ul class="show-list">
                <li>Band: Why Sol Serious</li>
              </ul>
            </div>
            <div class="show-list-card">
              <h3 class="show-list-time">4:40 pm - 5:10 pm</h3>
              <div class="lottery-info">
                <h4>èˆå°æŠ½å¥– Lottery!</h4>
                <p>
                  Join Stage lottery to win the grand prize worth
                  <span style="color: #ce0f04; font-weight: bold">$719!</span>
                </p>
                <p style="font-weight: bold">å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æŠ½å¥–åˆ¸ï¼Œä»¥å‚ä¸èˆå°æŠ½å¥–ï¼š</p>
                <ol>
                  <li>è´­ä¹°å”®ä»· $35 çš„ç•…ç©åˆ¸èµ é€ 3 å¼ </li>
                  <li>è´­ä¹° â‰§$15 çš„ä»£å¸èµ é€ 1 å¼ </li>
                  <li>è´­ä¹° â‰§$30 çš„ä»£å¸èµ é€ 2 å¼ </li>
                  <li>æå‰ 24 å°æ—¶æ³¨å†Œæ´»åŠ¨èµ é€ 1 å¼ </li>
                </ol>
                <p style="font-weight: bold">
                  How to obtain stage lottery ticket to join the stage lottery?
                </p>
                <ol>
                  <li>Purchase ZGZG-all inclusive ticket ($35) - 3 tickets</li>
                  <li>Purchase ZGZG tokens â‰§ $15 - 1 ticket</li>
                  <li>Purchase ZGZG tokens â‰§ $30 - 2 ticketsï¼›</li>
                  <li>Register 24 hours before event start (before Oct 19 2024, PST 12pm)</li>
                </ol>
              </div>
            </div>
            <div class="show-list-card">
              <h3 class="show-list-time">5:10 pm - 5:40 pm</h3>
              <ul class="show-list">
                <li>ç‰¹é‚€å˜‰å®¾ï¼šèµ°èµ·ä¹é˜Ÿ Special Guest: StartUp Band</li>
              </ul>
            </div>
            <div style="padding-bottom: 1rem; text-align: center; color: rgb(92, 92, 92)">
              Produced by è½½æ­Œåœ¨è°·
            </div>`;

      const sponsorsHTMLContent = `
      <div class="sponsor-container">
              <div class="sponsor-tab-group" id="sponsorTabGroup">
                <div
                  class="sponsor-tab sponsor-tab__active"
                  id="sponsorTab0"
                  data-i18n-label="sponsor.tab.guide"
                >
                  èµåŠ©å•†
                </div>
                <div
                  class="sponsor-tab sponsor-tab__inactive"
                  id="sponsorTab1"
                  data-i18n-label="sponsor.tab.shows"
                >
                  å‹æƒ…åˆä½œ
                </div>
              </div>
              <div id="sponsorTabContainer">
                <div id="sponsorLogoGroup">
                </div>
              </div>
              <div id="sponsorDetailsContainer"></div>
            </div>`;
    </script>
  </head>
  <body>
    <div>
      <!-- æµ‹è¯•æŒ‰é’® -->
      <button
        onclick="function clearCookies() {Cookies.remove('phone'); Cookies.remove('collectedStamps')} clearCookies()"
        style="position: absolute; top: 0; right: 0"
      >
        åˆ é™¤ç™»è®°ä¿¡æ¯
      </button>

      <!-- <div id="top-info">
        <div id="pay-info">
          <span data-i18n-label="payInfo.coin"> </span>
          <span data-i18n-label="payInfo.cash"> </span>
        </div>
        <div id="change-lang">
          <span data-i18n-label="langSwitch"> </span>
        </div>
      </div> -->
      <div id="map-container">
        <img id="map" alt="" />
      </div>

      <div id="registerPopup" class="display-none">
        <div id="registerPopupCloseBtn" class="btn-close">Ã—</div>
        <h1>è¾“å…¥æ‰‹æœºå·</h1>
        <p style="margin: 0 4rem 1rem 4rem">
          è¾“å…¥æ‰‹æœºå·æ¥è·å–æ‚¨çš„ä¸“å±äºŒç»´ç ã€‚å¯ä»¥ç”¨æ¥åœ¨æ”¯æŒçš„æ‘Šä½è¿›è¡Œæ‰“å¡ã€‚æ”¶é›†æ‰“å¡è®°å½•å¯ä»¥æ¢å–ç¤¼å“ã€‚
        </p>
        <div style="justify-content: center; display: flex">
          <input
            id="phoneNumber"
            type="tel"
            pattern="[0-9]{10}"
            required
            placeholder="æ ¼å¼ï¼š1234567890"
            style="height: 2rem; width: 100%; margin: 0 4rem; border-radius: 0.7rem"
          />
        </div>
        <div style="display: flex; margin-top: 1rem; justify-content: center">
          <button
            id="confirmPhone"
            disabled
            style="
              margin: 0 4rem;
              background: #ffd400;
              border: 1px #f5be00 solid;
              width: 100%;
              height: 2rem;
              border-radius: 0.7rem;
            "
          >
            ç¡®è®¤
          </button>
        </div>
      </div>

      <div id="checkinHistoryPopup" class="display-none">
        <div id="checkinHistoryPopupCloseBtn" class="btn-close">Ã—</div>
        <h1>æ‰“å¡è®°å½•</h1>

        <div>
          <p>ä½ å·²ç»æ”¶é›†äº† <span id="stampCount">0</span> ä¸ª</p>
          <p>å‡­æ‰“å¡è®°å½•åœ¨å…‘å¥–å¤„é¢†å¥–</p>
        </div>

        <div class="stamp-cards-list" id="stampCardsList"></div>
      </div>

      <div id="boothListPopup" class="display-none">
        <div id="boothListPopupCloseBtn" class="btn-close">Ã—</div>
        <div id="returnToBoothListBtn" class="display-none">
          <img src="/images/2024-map/arrow.png" alt="" />
        </div>
        <h1 id="sectionName"></h1>
        <div id="boothList"></div>
        <div id="boothDetails"></div>
      </div>

      <div id="qrCodePopup" class="display-none">
        <div id="qrCodePopupCloseBtn" class="btn-close">Ã—</div>
        <h1>æˆ‘çš„äºŒç»´ç </h1>
        <p>ä½¿ç”¨çš„æ‰‹æœºå·ï¼š<span id="registeredPhone"></span></p>
        <div id="qrCodeContainer"></div>
      </div>

      <div id="drawer">
        <div class="checkin-button-container" id="checkinButtonContainer"></div>

        <!-- æ˜¾ç¤ºæ‰“å¡é¡µé¢ -->
        <div id="drawer-slider-container">
          <button id="drawer-slider"></button>
        </div>
        <div class="drawer-tab-group" id="drawerTabGroup">
          <div
            class="drawer-tab drawer-tab__active"
            id="drawerTab0"
            data-i18n-label="drawer.tab.guide"
          >
            æ¸¸å›­æŒ‡å—
          </div>
          <div
            class="drawer-tab drawer-tab__inactive"
            id="drawerTab1"
            data-i18n-label="drawer.tab.shows"
          >
            èŠ‚ç›®å•
          </div>
          <div
            class="drawer-tab drawer-tab__inactive"
            id="drawerTab2"
            data-i18n-label="drawer.tab.guide.sponsors"
          >
            èµåŠ©&åˆä½œ
          </div>
        </div>
        <div class="drawer-content__container">
          <div id="drawer-content">
            <img src="/images/2024-map/tourGuide.png" alt="æ¸¸å›­æŒ‡å—" />
          </div>
        </div>
      </div>
    </div>
  </body>

  <!-- è·å–å…¨å±€ DOM -->
  <script>
    // å¼¹çª—
    const boothListPopupEle = document.querySelector('#boothListPopup');
    const checkinHistoryPopupEle = document.querySelector('#checkinHistoryPopup');
    const registerPopupEle = document.querySelector('#registerPopup');
    const qrCodePopupEle = document.querySelector('#qrCodePopup');

    // æ‘Šä½ç›¸å…³
    const boothListEle = document.querySelector('#boothList');
    const boothListPopupCloseBtnEle = document.querySelector('#boothListPopupCloseBtn');
    const sectionNameEle = document.querySelector('#sectionName');
    const boothDetailsEle = document.querySelector('#boothDetails');
    const returnToBoothListBtnEle = document.querySelector('#returnToBoothListBtn');
  </script>

  <!-- ä¸­è‹±åˆ‡æ¢ -->
  <!-- <script>
    const allI18nEles = document.querySelectorAll('[data-i18n-label]');

    allI18nEles.forEach((e) => {
      const i18nLabel = e.getAttribute('data-i18n-label');

      e.innerHTML = i18nStrings[i18nLabel][siteStates.selectedLanguage];
    });
  </script> -->
  <!-- æ‘Šä½ä¿¡æ¯å¼¹çª— -->
  <script>
    // boothListEle.onclick = (e) => {
    //   openBoothDetails(e);
    // };

    boothListPopupCloseBtnEle.onclick = () => {
      closePopup(boothListPopupEle);
      document.querySelector('#boothDetails')?.classList.add('display-none');
      document.querySelector('#returnToBoothListBtn')?.classList.add('display-none');
      document.querySelector('#boothList')?.classList.remove('display-none');
    };

    returnToBoothListBtnEle.onclick = returnToBoothList;
  </script>
  <!-- pan zoom map script -->
  <script>
    class TouchDragEvent {
      maxScale = 5;
      minScale = 1;
      initialWidth;
      initialHeight;
      initialLeft;
      initialTop;

      translateXLeftLimit;
      translateYUpperLimit = 0;

      translateXRightLimit = 0;
      translateYLowerLimit = 0;

      preTouchPosition = {};
      translateX = 0;
      translateY = 0;
      scaleRatio = 1;
      scaleOrigin = {
        x: 0,
        y: 0,
      };
      preTouchesClientx1y1x2y2;
      originHaveSet = false;

      img;
      naturalWidth;
      naturalHeight;

      area = {
        cuisine: {
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
        },
      };

      constructor(img) {
        this.img = img;
        img.src = mapURL;
        img.onload = () => {
          this.calculateInitialSize();

          this.reset();
          this.naturalWidth = this.img.naturalWidth;
          this.naturalHeight = this.img.naturalHeight;
          this.area = {
            cuisine: {
              left: 170 / this.naturalWidth,
              top: 340 / this.naturalHeight,
              right: 351 / this.naturalWidth,
              bottom: 442 / this.naturalHeight,
            },
            kids: {
              left: 228 / this.naturalWidth,
              top: 485 / this.naturalHeight,
              right: 483 / this.naturalWidth,
              bottom: 588 / this.naturalHeight,
            },
            traditions1: {
              left: 104 / this.naturalWidth,
              top: 633 / this.naturalHeight,
              right: 544 / this.naturalWidth,
              bottom: 698 / this.naturalHeight,
            },
            traditions2: {
              left: 525 / this.naturalWidth,
              top: 446 / this.naturalHeight,
              right: 635 / this.naturalWidth,
              bottom: 626 / this.naturalHeight,
            },
            functions1: {
              left: 154 / this.naturalWidth,
              top: 741 / this.naturalHeight,
              right: 518 / this.naturalWidth,
              bottom: 805 / this.naturalHeight,
            },
            functions2: {
              left: 519 / this.naturalWidth,
              top: 315 / this.naturalHeight,
              right: 622 / this.naturalWidth,
              bottom: 420 / this.naturalHeight,
            },
          };
          // console.log('this.area', JSON.stringify(this.area));
          // console.log('initialWidth', this.initialWidth);
          // console.log('initialHeight', this.initialHeight);
          // console.log('naturalWidth', this.naturalWidth);
          // console.log('naturalHeight', this.naturalHeight);
        };

        img.ontouchstart = this.onTouchstart.bind(this);
        img.ontouchmove = this.onTouchmove.bind(this);
        img.ontouchend = this.onTouchend.bind(this);
        img.ontouchcancel = this.ontouchcancel.bind(this);

        img.onclick = this.onClick.bind(this);
      }

      calculateInitialSize() {
        if (this.naturalWidth < this.naturalHeight) {
          this.setDisplaySize(
            screen.width,
            (screen.width / this.naturalWidth) * this.naturalHeight
          );
        } else if (this.naturalWidth > this.naturalHeight) {
          this.setDisplaySize(
            (screen.width / this.naturalHeight) * this.naturalWidth,
            screen.width
          );
        } else {
          this.setDisplaySize(screen.width, screen.width);
        }
      }

      setDisplaySize(width, height) {
        this.initialWidth = width;
        this.initialHeight = height;

        if (this.initialWidth >= 280) {
          this.initialLeft = -(this.initialWidth - 280) / 2;
        }

        if (this.initialHeight >= 280) {
          this.initialTop = -(this.initialHeight - 280) / 2;
        }
      }

      reset() {
        this.translateXLeftLimit = 0;
        this.translateYUpperLimit = 0;

        this.translateXRightLimit = 0;
        this.translateYLowerLimit = 0;

        this.preTouchPosition = {};
        this.translateX = 0;
        this.translateY = 0;
        this.scaleRatio = 1;
        this.scaleOrigin = {
          x: 0,
          y: 0,
        };
        this.preTouchesClientx1y1x2y2 = undefined;
        this.originHaveSet = false;
        this.setStyle('transform', 'none');
        this.setStyle('transform-origin', '50% 50%');
      }

      onClick(e) {
        if (siteStates.isDrawerOpen) {
          drawerContentEle.className = 'drawer-close';
          siteStates.isDrawerOpen = false;
          return;
        }

        // å¦‚æœæœ‰æ‰“å¼€çš„å¼¹çª—ï¼ˆä¸æ˜¯é¡¶å±‚æŠ½å±‰ï¼‰ï¼Œä¸å“åº”åœ°å›¾ç‚¹å‡»
        if (siteStates.hasPopupOpen) {
          closePopup(boothListPopupEle);

          // å¦‚æœæ˜¯åœ¨æ‘Šä½è¯¦æƒ…ä¸­ï¼Œè¿”å›åˆ—è¡¨
          document.querySelector('#boothDetails')?.classList.add('display-none');
          document.querySelector('#returnToBoothListBtn')?.classList.add('display-none');
          document.querySelector('#boothList')?.classList.remove('display-none');

          closePopup(registerPopupEle);
          closePopup(checkinHistoryPopupEle);
          closePopup(registerPopupEle);
          closePopup(qrCodePopupEle);
          return;
        }

        // offsetX å’Œ offsetY ä¸ä¼šéšç€ç¼©æ”¾å¹³ç§»è€Œå˜åŒ–ï¼Œå¯ä»¥æ ¹æ®è¿™ä¿©æ¥ç¡®å®šç‚¹äº†å“ªé‡Œã€‚ä½†æ˜¯ä¸èƒ½ç›´æ¥ç”¨ï¼Œå› ä¸ºå›¾ç‰‡æ˜¾ç¤ºçš„å°ºå¯¸ä¸åŒå±å¹•ä¸ä¸€æ ·ï¼Œå¾—æŒ‰ç…§ç™¾åˆ†æ¯”ç®—
        const x = e.offsetX;
        const y = e.offsetY;

        const xPercent = x / this.img.clientWidth;
        const yPercent = y / this.img.clientHeight;

        // console.log('offsetX', e.offsetX);
        // console.log('offsetY', e.offsetY);
        // console.log('xPercent', xPercent);
        // console.log('yPercent', yPercent);
        // console.log('initialWidth', this.initialWidth);
        // console.log('initialHeight', this.initialHeight);
        // console.log('this.img.clientHeight', this.img.clientHeight);
        // console.log('this.img.clientWidth', this.img.clientWidth);

        if (
          xPercent >= this.area.cuisine.left &&
          xPercent <= this.area.cuisine.right &&
          yPercent >= this.area.cuisine.top &&
          yPercent <= this.area.cuisine.bottom
        ) {
          showBoothListPopupFunc('cuisine');
        } else if (
          xPercent >= this.area.kids.left &&
          xPercent <= this.area.kids.right &&
          yPercent >= this.area.kids.top &&
          yPercent <= this.area.kids.bottom
        ) {
          showBoothListPopupFunc('kids');
        } else if (
          (xPercent >= this.area.traditions1.left &&
            xPercent <= this.area.traditions1.right &&
            yPercent >= this.area.traditions1.top &&
            yPercent <= this.area.traditions1.bottom) ||
          (xPercent >= this.area.traditions2.left &&
            xPercent <= this.area.traditions2.right &&
            yPercent >= this.area.traditions2.top &&
            yPercent <= this.area.traditions2.bottom)
        ) {
          showBoothListPopupFunc('traditions');
        } else if (
          (xPercent >= this.area.functions1.left &&
            xPercent <= this.area.functions1.right &&
            yPercent >= this.area.functions1.top &&
            yPercent <= this.area.functions1.bottom) ||
          (xPercent >= this.area.functions2.left &&
            xPercent <= this.area.functions2.right &&
            yPercent >= this.area.functions2.top &&
            yPercent <= this.area.functions2.bottom)
        ) {
          showBoothListPopupFunc('functions');
        }
      }

      // @HostListener('touchstart', ['$event'])
      onTouchstart(e) {
        let touches = e.touches;
        if (touches.length > 1) {
          let one = touches['0'];
          let two = touches['1'];
          this.preTouchesClientx1y1x2y2 = [one.clientX, one.clientY, two.clientX, two.clientY];
          this.originHaveSet = false;
        }
        this.recordPreTouchPosition(touches['0']);
      }

      // @HostListener('touchmove', ['$event'])
      onTouchmove(e) {
        let touches = e.touches;

        if (touches.length === 1) {
          let oneTouch = touches['0'];
          let translated = this.getTranslate(oneTouch.target);
          this.translateX = oneTouch.clientX - this.preTouchPosition.x + translated.left;
          this.translateY = oneTouch.clientY - this.preTouchPosition.y + translated.top;

          this.limitImageBorder();

          if (this.scaleRatio !== 1) {
            let matrix = `matrix(${this.scaleRatio}, 0, 0, ${this.scaleRatio}, ${this.translateX}, ${this.translateY})`;
            this.setStyle('transform', matrix);
          }

          this.recordPreTouchPosition(oneTouch);
        } else {
          let one = touches['0'];
          let two = touches['1'];
          this.scaleRatio =
            (this.distance(one.clientX, one.clientY, two.clientX, two.clientY) /
              this.distance(...this.preTouchesClientx1y1x2y2)) *
              this.scaleRatio || 1;
          if (this.scaleRatio > this.maxScale) {
            this.scaleRatio = this.maxScale;
          }
          if (this.scaleRatio < this.minScale) {
            this.scaleRatio = this.minScale;
          }

          if (!this.originHaveSet) {
            this.originHaveSet = true;
            // ç§»åŠ¨è§†çº¿ä¸­å¿ƒ
            let origin = this.relativeCoordinate(
              (one.clientX + two.clientX) / 2,
              (one.clientY + two.clientY) / 2,
              this.img.getBoundingClientRect()
            );
            // ä¿®æ­£è§†é‡å˜åŒ–å¸¦æ¥çš„å¹³ç§»é‡
            this.translateX =
              (this.scaleRatio - 1) * (origin.x - this.scaleOrigin.x) + this.translateX;
            this.translateY =
              (this.scaleRatio - 1) * (origin.y - this.scaleOrigin.y) + this.translateY;

            this.setStyle('transform-origin', `${origin.x}px ${origin.y}px`);
            this.scaleOrigin = origin;
          }

          this.limitImageBorder();
          let matrix = `matrix(${this.scaleRatio}, 0, 0, ${this.scaleRatio}, ${this.translateX}, ${this.translateY})`;
          this.setStyle('transform', matrix);
          this.preTouchesClientx1y1x2y2 = [one.clientX, one.clientY, two.clientX, two.clientY];
        }
        e.preventDefault();
      }

      // è§¦æ‘¸ç‚¹ç¦»å¼€æ—¶æ›´æ–°æœ€åä½ç½®
      // @HostListener('touchend', ['$event'])
      onTouchend(e) {
        let touches = e.touches;
        if (touches.length === 1) {
          this.recordPreTouchPosition(touches['0']);
        }
        if (this.scaleRatio === 1) {
          this.reset();
        }
      }

      // @HostListener('touchcancel', ['$event'])
      ontouchcancel(e) {
        let touches = e.touches;
        if (touches.length === 1) {
          this.recordPreTouchPosition(touches['0']);
        }
        if (this.scaleRatio === 1) {
          this.reset();
        }
      }

      limitImageBorder() {
        this.translateXLeftLimit = (this.scaleRatio - 1) * this.scaleOrigin.x - this.initialLeft; // å·²æ­£ç¡®
        this.translateXRightLimit =
          -(this.scaleRatio - 1) * (this.initialWidth - this.scaleOrigin.x) + this.initialLeft;

        this.translateYUpperLimit = (this.scaleRatio - 1) * this.scaleOrigin.y - this.initialTop; // å·²æ­£ç¡®
        this.translateYLowerLimit =
          -(this.scaleRatio - 1) * (this.initialHeight - this.scaleOrigin.y) + this.initialTop; // å·²æ­£ç¡®

        if (this.translateY > this.translateYUpperLimit) {
          this.translateY = this.translateYUpperLimit;
        } else if (this.translateY < this.translateYLowerLimit) {
          this.translateY = this.translateYLowerLimit;
        }

        if (this.translateX > this.translateXLeftLimit) {
          this.translateX = this.translateXLeftLimit;
        } else if (this.translateX < this.translateXRightLimit) {
          this.translateX = this.translateXRightLimit;
        }
      }

      getStyle(target, style) {
        let styles = window.getComputedStyle(target, null);
        return styles.getPropertyValue(style);
      }

      getTranslate(target) {
        let matrix = this.getStyle(target, 'transform');
        let nums = matrix.substring(7, matrix.length - 1).split(', ');
        let left = parseInt(nums[4]) || 0;
        let top = parseInt(nums[5]) || 0;
        return {
          left: left,
          top: top,
        };
      }

      recordPreTouchPosition(touch) {
        this.preTouchPosition = {
          x: touch.clientX,
          y: touch.clientY,
        };
      }

      relativeCoordinate(x, y, rect) {
        let cx = (x - rect.left) / this.scaleRatio;
        let cy = (y - rect.top) / this.scaleRatio;
        return {
          x: cx,
          y: cy,
        };
      }

      setStyle(key, value) {
        this.img.style[key] = value;
      }

      distance(x1, y1, x2, y2) {
        let a = x1 - x2;
        let b = y1 - y2;
        return Math.sqrt(a * a + b * b);
      }
    }

    // ä½¿ç”¨æ–¹æ³•
    let imgElement = document.querySelector('img'); // é€‰æ‹©éœ€è¦ç»‘å®šäº‹ä»¶çš„å›¾ç‰‡å…ƒç´ 
    new TouchDragEvent(imgElement);
  </script>

  <!-- drawer script -->
  <script>
    const drawerSliderEle = document.getElementById('drawer-slider');
    const drawerContentEle = document.getElementById('drawer-content');
    const drawerTabGroupEle = document.getElementById('drawerTabGroup');
    let isDrawerOpen = false;

    function toggleDrawer() {
      siteStates.isDrawerOpen = !siteStates.isDrawerOpen;

      if (siteStates.isDrawerOpen) {
        drawerContentEle.className = 'drawer-open';
      } else {
        drawerContentEle.className = 'drawer-close';
      }
    }

    function openDrawer() {
      siteStates.isDrawerOpen = true;

      drawerContentEle.className = 'drawer-open';
      drawerContentEle.parentNode.scrollTop = 0;
    }

    drawerSliderEle.onclick = toggleDrawer;
    drawerTabGroup.onclick = openDrawer;
  </script>

  <!-- é¡¶å±‚åˆ‡æ¢tab -->
  <script>
    const tourTab = document.querySelector('#drawerTabGroup > #drawerTab0');
    const showListTab = document.querySelector('#drawerTabGroup > #drawerTab1');
    const sponsorsTab = document.querySelector('#drawerTabGroup > #drawerTab2');
    const tabContainer = document.querySelector('#drawer-content');

    tourTab.onclick = () => {
      tourTab.classList.remove('drawer-tab__inactive');
      tourTab.classList.add('drawer-tab__active');

      showListTab.classList.add('drawer-tab__inactive');
      showListTab.classList.remove('drawer-tab__active');

      sponsorsTab.classList.add('drawer-tab__inactive');
      sponsorsTab.classList.remove('drawer-tab__active');
      tabContainer.innerHTML = tourGuideHTMLContent;
      drawerContentEle.parentNode.scrollTop = 0;
    };

    showListTab.onclick = () => {
      showListTab.classList.remove('drawer-tab__inactive');
      showListTab.classList.add('drawer-tab__active');

      tourTab.classList.add('drawer-tab__inactive');
      tourTab.classList.remove('drawer-tab__active');

      sponsorsTab.classList.add('drawer-tab__inactive');
      sponsorsTab.classList.remove('drawer-tab__active');

      tabContainer.innerHTML = showListHTMLContent;
      drawerContentEle.parentNode.scrollTop = 0;
    };

    sponsorsTab.onclick = () => {
      sponsorsTab.classList.remove('drawer-tab__inactive');
      sponsorsTab.classList.add('drawer-tab__active');

      tourTab.classList.add('drawer-tab__inactive');
      tourTab.classList.remove('drawer-tab__active');

      showListTab.classList.add('drawer-tab__inactive');
      showListTab.classList.remove('drawer-tab__active');

      tabContainer.innerHTML = sponsorsHTMLContent;
      drawerContentEle.parentNode.scrollTop = 0;

      bindSponsorTabEvents();
    };
  </script>

  <!-- èµåŠ©å•†å­tabåˆ‡æ¢ -->
  <script>
    function showSponsorInfo(sponsorKey, sponsorDetailsContainer) {
      const qrImages = sponsorsAndCollaboratorsMap[sponsorKey].qrCode
        .map((code) => {
          return `<img class="sponsor-qr" src="${code}"/>`;
        })
        .join('');
      sponsorDetailsContainer.innerHTML = `
        <div>
          <p class="sponsor-details">${sponsorsAndCollaboratorsMap[sponsorKey].details ?? ''}</p>
          ${qrImages}
        </div>
        `;
    }
    function selectSponsor(e, sponsorDetailsContainer) {
      if (e.target.classList.contains('logo-img')) {
        const sponsorKey = e.target.getAttribute('data-sponsor');
        let inputEle;

        for (let item of e.target.parentNode.parentNode.children) {
          if (item.nodeName === 'INPUT') {
            inputEle = item;
          }
        }
        inputEle.checked = true;
        showSponsorInfo(sponsorKey, sponsorDetailsContainer);
      }
    }
    function bindSponsorTabEvents() {
      const sponsorTab1 = document.querySelector('#sponsorTabGroup > #sponsorTab0');
      const sponsorTab2 = document.querySelector('#sponsorTabGroup > #sponsorTab1');
      const sponsorLogoGroup = document.querySelector('#sponsorLogoGroup');
      const sponsorDetailsContainer = document.querySelector('#sponsorDetailsContainer');

      function activateTab1() {
        sponsorTab1.classList.remove('sponsor-tab__inactive');
        sponsorTab1.classList.add('sponsor-tab__active');

        sponsorTab2.classList.add('sponsor-tab__inactive');
        sponsorTab2.classList.remove('sponsor-tab__active');

        sponsorLogoGroup.innerHTML = sponsorsListHTML;
        sponsorLogoGroup.scrollLeft = 0;

        document.querySelectorAll('.active-selected-sponsor').checked = true;

        sponsorLogoGroup.onclick = (e) => {
          selectSponsor(e, sponsorDetailsContainer);
        };
        showSponsorInfo(sponsorsList[0], sponsorDetailsContainer);
      }

      function activateTab2() {
        sponsorTab2.classList.remove('sponsor-tab__inactive');
        sponsorTab2.classList.add('sponsor-tab__active');

        sponsorTab1.classList.add('sponsor-tab__inactive');
        sponsorTab1.classList.remove('sponsor-tab__active');

        sponsorLogoGroup.innerHTML = collaboratorsListHTML;
        sponsorLogoGroup.scrollLeft = 0;

        sponsorLogoGroup.onclick = (e) => {
          selectSponsor(e, sponsorDetailsContainer);
        };
        showSponsorInfo(collaboratorsList[0], sponsorDetailsContainer);
      }

      activateTab1();

      sponsorTab1.onclick = activateTab1;

      sponsorTab2.onclick = activateTab2;
    }
  </script>

  <!--æ‰“å¡è®°å½•å¼¹çª—ï¼Œæ³¨å†Œç”ŸæˆäºŒç»´ç  -->
  <script>
    const registeredCheckinButtonsHTML = `<div class="checkin-button" id="showCheckinHistory">
            <img class="checkin-button-logo" src="/images/2024-map/zgzglogo.png" alt="" />
            æŸ¥çœ‹æ‰“å¡è®°å½•
          </div>
          <div class="checkin-button" id="showQRCode">
            <img class="checkin-button-logo" style="height: 76%;" src="/images/2024-map/my-qr-code.png" alt="" />
            æˆ‘çš„äºŒç»´ç 
          </div>`;
    const unregisteredCheckinButtonsHTML = `<div class="checkin-button" id="checkinButton">
            <img class="checkin-button-logo"  src="/images/2024-map/zgzglogo.png" alt="" />
            ç™»è®°ä»¥è·å–æ‰“å¡äºŒç»´ç 
          </div>`;

    const stampCardsListEle = document.querySelector('#stampCardsList');
    const stampCountEle = document.querySelector('#stampCount');

    const confirmPhoneEle = document.querySelector('#confirmPhone');
    const phoneEle = document.querySelector('#phoneNumber');

    function showCheckinhistory() {
      if (Cookies.get('phone')) {
        openStampPopup();
        // æ›´æ–°æ‘Šä½åˆ—è¡¨ä¸­æ‰“å¡ä¿¡æ¯
        cuisinesListHTML = generateBoothListHTML(cuisinesList, sectionNames.cuisine);
        kidsListHTML = generateBoothListHTML(kidsList, sectionNames.kids);
        traditionsListHTML = generateBoothListHTML(traditionsList, sectionNames.traditions);
        functionsListHTML = generateBoothListHTML(functionsList, sectionNames.functions);
      } else {
        openPopup(registerPopupEle);
      }
    }

    if (Cookies.get('phone')) {
      generateQR();
      document.querySelector('#checkinButtonContainer').innerHTML = registeredCheckinButtonsHTML;

      if (document.querySelector('#showQRCode')) {
        document.querySelector('#showQRCode').onclick = () => {
          openPopup(qrCodePopupEle);
        };
        document.querySelector('#showCheckinHistory').onclick = showCheckinhistory;

        document.querySelector('#qrCodeContainer').appendChild(siteStates.qrCodeEle);
        document.querySelector('#registeredPhone').innerHTML = Cookies.get('phone');
      }
    } else {
      document.querySelector('#checkinButtonContainer').innerHTML = unregisteredCheckinButtonsHTML;
      document.querySelector('#checkinButton').onclick = () => {
        openPopup(registerPopupEle);
      };
    }

    async function openStampPopup() {
      const querySnapshot = await window.getDocs(window.firebaseQuery);

      const stampCards = [];
      const collectedStamps = new Set(Cookies.getJSON('collectedStamps') ?? []);

      // querySnapshot.forEach((doc) => {
      // const boothIndex = doc.data().booth;
      ['cuisine-2', 'cuisine-8', 'kids-1'].forEach((doc) => {
        const boothIndex = doc;

        collectedStamps.add(boothIndex);
        const boothName =
          allBooths.find((booth) => booth.stampIndex === boothIndex)?.name ?? 'æœªçŸ¥æ‘Šä½';
        stampCards.push(`<div class="stamp-card">
          <div class="stamp-name">${boothName}</div>
          <img src="/images/2024-map/zgzglogo.png" alt="" />
        </div>`);
      });

      Cookies.set('collectedStamps', Array.from(collectedStamps));

      stampCountEle.innerHTML = stampCards.length;

      stampCardsListEle.innerHTML = stampCards.join('');

      openPopup(checkinHistoryPopupEle);
    }

    function register() {
      if (phoneEle.checkValidity()) {
        Cookies.set('phone', phoneEle.value);
        generateQR();
        document.querySelector('#checkinButtonContainer').innerHTML = registeredCheckinButtonsHTML;
        document.querySelector('#showCheckinHistory').onclick = showCheckinhistory;
        alert('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç‚¹å‡»ä¸»ç•Œé¢â€œæˆ‘çš„äºŒç»´ç â€æŒ‰é’®æŸ¥çœ‹');

        closePopup(registerPopupEle);
        document.querySelector('#showQRCode').onclick = () => {
          openPopup(qrCodePopupEle);
        };

        document.querySelector('#qrCodeContainer').appendChild(siteStates.qrCodeEle);
      } else {
        alert('è¯·è¾“å…¥æ‰‹æœºå·');
      }
    }

    function validatePhone(e) {
      phoneEle.checkValidity();

      if (phoneEle.checkValidity()) {
        confirmPhoneEle.disabled = false;
      } else {
        confirmPhoneEle.disabled = true;
      }
    }

    document.querySelector('#checkinHistoryPopupCloseBtn').onclick = () => {
      closePopup(checkinHistoryPopupEle);
    };
    document.querySelector('#registerPopupCloseBtn').onclick = () => {
      closePopup(registerPopupEle);
    };
    document.querySelector('#qrCodePopupCloseBtn').onclick = () => {
      closePopup(qrCodePopupEle);
    };
    confirmPhoneEle.onclick = register;
    phoneEle.oninput = validatePhone;
  </script>
</html>
